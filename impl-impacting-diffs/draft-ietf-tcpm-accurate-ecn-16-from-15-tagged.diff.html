<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by rfcdiff 1.45: rfcdiff  -->
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux c728f7009bdd 5.14.21-150400.24.38-default #1 SMP PREEMPT_DYNAMIC Fri Dec 9 09:29:22 UTC 2022 (e9c5676) x86_64 x86_64 x86_64 GNU/Linux -->
<!-- Using awk: /usr/bin/gawk: GNU Awk 5.1.0, API: 3.0 (GNU MPFR 4.1.0, GNU MP 6.2.1) -->
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.8 -->
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.2 -->
<html xmlns="http://www.w3.org/1999/xhtml"><head> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
  <meta http-equiv="Content-Style-Type" content="text/css"> 
  <title>Diff: draft-ietf-tcpm-accurate-ecn-15.txt - draft-ietf-tcpm-accurate-ecn-16.txt</title> 
  <style type="text/css"> 
    body    { margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
    span.hide { display: none; color: #aaa;}    a:hover span { display: inline; }    tr.change { background-color: gray; } 
    tr.change a { text-decoration: none; color: black } 
  </style> 
     <script>
var chunk_index = 0;
var old_chunk = null;

function format_chunk(index) {
    var prefix = "diff";
    var str = index.toString();
    for (x=0; x<(4-str.length); ++x) {
        prefix+='0';
    }
    return prefix + str;
}

function find_chunk(n){
    return document.querySelector('tr[id$="' + n + '"]');
}

function change_chunk(offset) {
    var index = chunk_index + offset;
    var new_str;
    var new_chunk;

    new_str = format_chunk(index);
    new_chunk = find_chunk(new_str);
    if (!new_chunk) {
        return;
    }
    if (old_chunk) {
        old_chunk.style.outline = "";
    }
    old_chunk = new_chunk;
    old_chunk.style.outline = "1px solid red";
    window.location.hash = "#" + new_str;
    window.scrollBy(0,-100);
    chunk_index = index;
}

document.onkeydown = function(e) {
    switch (e.keyCode) {
    case 78:
        change_chunk(1);
        break;
    case 80:
        change_chunk(-1);
        break;
    }
};
   </script> 
</head> 
<body> 
  <table border="0" cellspacing="0" cellpadding="0"> 
  <tbody><tr id="part-1" bgcolor="orange"><th><br>
</th><th>&nbsp;draft-ietf-tcpm-accurate-ecn-15.txt&nbsp;</th><th> <br>
</th><th>&nbsp;draft-ietf-tcpm-accurate-ecn-16.txt&nbsp;</th><th><br>
</th></tr> 
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">TCP Maintenance &amp; Minor Extensions (tcpm)                     B. Briscoe</td><td> </td><td class="right">TCP Maintenance &amp; Minor Extensions (tcpm)                     B. Briscoe</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">Internet-Draft                                               Independent</td><td> </td><td class="right">Internet-Draft                                               Independent</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">Updates: 3168, 3449 (if approved)                          M. Kuehlewind</td><td> </td><td class="right">Updates: 3168, 3449 (if approved)                          M. Kuehlewind</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">Intended status: Standards Track                                Ericsson</td><td> </td><td class="right">Intended status: Standards Track                                Ericsson</td><td class="lineno"><br></td></tr>
      <tr id="diff0001"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">Expires: <span class="delete">January 13, 2022</span>                               R. Scheffenegger</td><td> </td><td class="rblock">Expires: <span class="insert">August 7, 2022  </span>                               R. Scheffenegger</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">                                                                  NetApp</td><td> </td><td class="right">                                                                  NetApp</td><td class="lineno"><br></td></tr>
      <tr id="diff0002"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">                                                        <span class="delete">   July 12, 2021</span></td><td> </td><td class="rblock">                                                        <span class="insert">February 3, 2022</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">                   More Accurate ECN Feedback in TCP</td><td> </td><td class="right">                   More Accurate ECN Feedback in TCP</td><td class="lineno"><br></td></tr>
      <tr id="diff0003"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">                    draft-ietf-tcpm-accurate-ecn-1<span class="delete">5</span></td><td> </td><td class="rblock">                    draft-ietf-tcpm-accurate-ecn-1<span class="insert">6</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">Abstract</td><td> </td><td class="right">Abstract</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Explicit Congestion Notification (ECN) is a mechanism where network</td><td> </td><td class="right">   Explicit Congestion Notification (ECN) is a mechanism where network</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   nodes can mark IP packets instead of dropping them to indicate</td><td> </td><td class="right">   nodes can mark IP packets instead of dropping them to indicate</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   incipient congestion to the end-points.  Receivers with an ECN-</td><td> </td><td class="right">   incipient congestion to the end-points.  Receivers with an ECN-</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   capable transport protocol feed back this information to the sender.</td><td> </td><td class="right">   capable transport protocol feed back this information to the sender.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   ECN was originally specified for TCP in such a way that only one</td><td> </td><td class="right">   ECN was originally specified for TCP in such a way that only one</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   feedback signal can be transmitted per Round-Trip Time (RTT).  Recent</td><td> </td><td class="right">   feedback signal can be transmitted per Round-Trip Time (RTT).  Recent</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   new TCP mechanisms like Congestion Exposure (ConEx), Data Center TCP</td><td> </td><td class="right">   new TCP mechanisms like Congestion Exposure (ConEx), Data Center TCP</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-2" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-2"><em> page 2, line 4<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-2"><em> page 2, line 4<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Internet-Drafts are working documents of the Internet Engineering</td><td> </td><td class="right">   Internet-Drafts are working documents of the Internet Engineering</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Task Force (IETF).  Note that other groups may also distribute</td><td> </td><td class="right">   Task Force (IETF).  Note that other groups may also distribute</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   working documents as Internet-Drafts.  The list of current Internet-</td><td> </td><td class="right">   working documents as Internet-Drafts.  The list of current Internet-</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Drafts is at https://datatracker.ietf.org/drafts/current/.</td><td> </td><td class="right">   Drafts is at https://datatracker.ietf.org/drafts/current/.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Internet-Drafts are draft documents valid for a maximum of six months</td><td> </td><td class="right">   Internet-Drafts are draft documents valid for a maximum of six months</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   and may be updated, replaced, or obsoleted by other documents at any</td><td> </td><td class="right">   and may be updated, replaced, or obsoleted by other documents at any</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   time.  It is inappropriate to use Internet-Drafts as reference</td><td> </td><td class="right">   time.  It is inappropriate to use Internet-Drafts as reference</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   material or to cite them other than as "work in progress."</td><td> </td><td class="right">   material or to cite them other than as "work in progress."</td><td class="lineno"><br></td></tr>
      <tr id="diff0004"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   This Internet-Draft will expire on <span class="delete">January 13</span>, 2022.</td><td> </td><td class="rblock">   This Internet-Draft will expire on <span class="insert">August 7</span>, 2022.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">Copyright Notice</td><td> </td><td class="right">Copyright Notice</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0005"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   Copyright (c) 202<span class="delete">1</span> IETF Trust and the persons identified as the</td><td> </td><td class="rblock">   Copyright (c) 202<span class="insert">2</span> IETF Trust and the persons identified as the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   document authors.  All rights reserved.</td><td> </td><td class="right">   document authors.  All rights reserved.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   This document is subject to BCP 78 and the IETF Trust's Legal</td><td> </td><td class="right">   This document is subject to BCP 78 and the IETF Trust's Legal</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Provisions Relating to IETF Documents</td><td> </td><td class="right">   Provisions Relating to IETF Documents</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   (https://trustee.ietf.org/license-info) in effect on the date of</td><td> </td><td class="right">   (https://trustee.ietf.org/license-info) in effect on the date of</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   publication of this document.  Please review these documents</td><td> </td><td class="right">   publication of this document.  Please review these documents</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   carefully, as they describe your rights and restrictions with respect</td><td> </td><td class="right">   carefully, as they describe your rights and restrictions with respect</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   to this document.  Code Components extracted from this document must</td><td> </td><td class="right">   to this document.  Code Components extracted from this document must</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   include Simplified BSD License text as described in Section 4.e of</td><td> </td><td class="right">   include Simplified BSD License text as described in Section 4.e of</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   the Trust Legal Provisions and are provided without warranty as</td><td> </td><td class="right">   the Trust Legal Provisions and are provided without warranty as</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-3" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-3"><em> page 2, line 44<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-3"><em> page 2, line 44<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   3.  AccECN Protocol Specification . . . . . . . . . . . . . . . .  12</td><td> </td><td class="right">   3.  AccECN Protocol Specification . . . . . . . . . . . . . . . .  12</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     3.1.  Negotiating to use AccECN . . . . . . . . . . . . . . . .  12</td><td> </td><td class="right">     3.1.  Negotiating to use AccECN . . . . . . . . . . . . . . . .  12</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       3.1.1.  Negotiation during the TCP handshake  . . . . . . . .  12</td><td> </td><td class="right">       3.1.1.  Negotiation during the TCP handshake  . . . . . . . .  12</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       3.1.2.  Backward Compatibility  . . . . . . . . . . . . . . .  13</td><td> </td><td class="right">       3.1.2.  Backward Compatibility  . . . . . . . . . . . . . . .  13</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       3.1.3.  Forward Compatibility . . . . . . . . . . . . . . . .  15</td><td> </td><td class="right">       3.1.3.  Forward Compatibility . . . . . . . . . . . . . . . .  15</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       3.1.4.  Retransmission of the SYN . . . . . . . . . . . . . .  15</td><td> </td><td class="right">       3.1.4.  Retransmission of the SYN . . . . . . . . . . . . . .  15</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       3.1.5.  Implications of AccECN Mode . . . . . . . . . . . . .  16</td><td> </td><td class="right">       3.1.5.  Implications of AccECN Mode . . . . . . . . . . . . .  16</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     3.2.  AccECN Feedback . . . . . . . . . . . . . . . . . . . . .  18</td><td> </td><td class="right">     3.2.  AccECN Feedback . . . . . . . . . . . . . . . . . . . . .  18</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       3.2.1.  Initialization of Feedback Counters . . . . . . . . .  18</td><td> </td><td class="right">       3.2.1.  Initialization of Feedback Counters . . . . . . . . .  18</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       3.2.2.  The ACE Field . . . . . . . . . . . . . . . . . . . .  19</td><td> </td><td class="right">       3.2.2.  The ACE Field . . . . . . . . . . . . . . . . . . . .  19</td><td class="lineno"><br></td></tr>
      <tr id="diff0006"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">       3.2.3.  The AccECN Option . . . . . . . . . . . . . . . . . .  2<span class="delete">7</span></td><td> </td><td class="rblock">       3.2.3.  The AccECN Option . . . . . . . . . . . . . . . . . .  2<span class="insert">8</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     3.3.  AccECN Compliance Requirements for TCP Proxies, Offload</td><td> </td><td class="right">     3.3.  AccECN Compliance Requirements for TCP Proxies, Offload</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">           Engines and other Middleboxes . . . . . . . . . . . . . .  36</td><td> </td><td class="right">           Engines and other Middleboxes . . . . . . . . . . . . . .  36</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       3.3.1.  Requirements for TCP Proxies  . . . . . . . . . . . .  36</td><td> </td><td class="right">       3.3.1.  Requirements for TCP Proxies  . . . . . . . . . . . .  36</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       3.3.2.  Requirements for Transparent Middleboxes and TCP</td><td> </td><td class="right">       3.3.2.  Requirements for Transparent Middleboxes and TCP</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">               Normalizers . . . . . . . . . . . . . . . . . . . . .  36</td><td> </td><td class="right">               Normalizers . . . . . . . . . . . . . . . . . . . . .  36</td><td class="lineno"><br></td></tr>
      <tr id="diff0007"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">       3.3.3.  Requirements for TCP ACK Filtering  . . . . . . . . .  <span class="delete">36</span></td><td> </td><td class="rblock">       3.3.3.  Requirements for TCP ACK Filtering  . . . . . . . . .  <span class="insert">37</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">       3.3.4.  Requirements for TCP Segmentation Offload . . . . . .  <span class="delete">37</span></td><td> </td><td class="rblock">       3.3.4.  Requirements for TCP Segmentation Offload . . . . . .  <span class="insert">38</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0008"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   4.  Updates to RFC 3168 . . . . . . . . . . . . . . . . . . . . .  <span class="delete">38</span></td><td> </td><td class="rblock">   4.  Updates to RFC 3168 . . . . . . . . . . . . . . . . . . . . .  <span class="insert">39</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   5.  Interaction with TCP Variants . . . . . . . . . . . . . . . .  <span class="delete">39</span></td><td> </td><td class="rblock">   5.  Interaction with TCP Variants . . . . . . . . . . . . . . . .  <span class="insert">40</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     5.1.  Compatibility with SYN Cookies  . . . . . . . . . . . . .  40</td><td> </td><td class="right">     5.1.  Compatibility with SYN Cookies  . . . . . . . . . . . . .  40</td><td class="lineno"><br></td></tr>
      <tr id="diff0009"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">     5.2.  Compatibility with TCP Experiments and Common TCP Options  4<span class="delete">0</span></td><td> </td><td class="rblock">     5.2.  Compatibility with TCP Experiments and Common TCP Options  4<span class="insert">1</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     5.3.  Compatibility with Feedback Integrity Mechanisms  . . . .  41</td><td> </td><td class="right">     5.3.  Compatibility with Feedback Integrity Mechanisms  . . . .  41</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   6.  Protocol Properties . . . . . . . . . . . . . . . . . . . . .  42</td><td> </td><td class="right">   6.  Protocol Properties . . . . . . . . . . . . . . . . . . . . .  42</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  44</td><td> </td><td class="right">   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  44</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   8.  Security Considerations . . . . . . . . . . . . . . . . . . .  45</td><td> </td><td class="right">   8.  Security Considerations . . . . . . . . . . . . . . . . . . .  45</td><td class="lineno"><br></td></tr>
      <tr id="diff0010"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   9.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  4<span class="delete">6</span></td><td> </td><td class="rblock">   9.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  4<span class="insert">7</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   10. Comments Solicited  . . . . . . . . . . . . . . . . . . . . .  47</td><td> </td><td class="right">   10. Comments Solicited  . . . . . . . . . . . . . . . . . . . . .  47</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   11. References  . . . . . . . . . . . . . . . . . . . . . . . . .  47</td><td> </td><td class="right">   11. References  . . . . . . . . . . . . . . . . . . . . . . . . .  47</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     11.1.  Normative References . . . . . . . . . . . . . . . . . .  47</td><td> </td><td class="right">     11.1.  Normative References . . . . . . . . . . . . . . . . . .  47</td><td class="lineno"><br></td></tr>
      <tr id="diff0011"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">     11.2.  Informative References . . . . . . . . . . . . . . . . .  <span class="delete">47</span></td><td> </td><td class="rblock">     11.2.  Informative References . . . . . . . . . . . . . . . . .  <span class="insert">48</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   Appendix A.  Example Algorithms . . . . . . . . . . . . . . . . .  <span class="delete">50</span></td><td> </td><td class="rblock">   Appendix A.  Example Algorithms . . . . . . . . . . . . . . . . .  <span class="insert">51</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">     A.1.  Example Algorithm to Encode/Decode the AccECN Option  . .  <span class="delete">50</span></td><td> </td><td class="rblock">     A.1.  Example Algorithm to Encode/Decode the AccECN Option  . .  <span class="insert">51</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     A.2.  Example Algorithm for Safety Against Long Sequences of</td><td> </td><td class="right">     A.2.  Example Algorithm for Safety Against Long Sequences of</td><td class="lineno"><br></td></tr>
      <tr id="diff0012"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">           ACK Loss  . . . . . . . . . . . . . . . . . . . . . . . .  <span class="delete">51</span></td><td> </td><td class="rblock">           ACK Loss  . . . . . . . . . . . . . . . . . . . . . . . .  <span class="insert">52</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">       A.2.1.  Safety Algorithm without the AccECN Option  . . . . .  <span class="delete">51</span></td><td> </td><td class="rblock">       A.2.1.  Safety Algorithm without the AccECN Option  . . . . .  <span class="insert">52</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">       A.2.2.  Safety Algorithm with the AccECN Option . . . . . . .  <span class="delete">53</span></td><td> </td><td class="rblock">       A.2.2.  Safety Algorithm with the AccECN Option . . . . . . .  <span class="insert">54</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     A.3.  Example Algorithm to Estimate Marked Bytes from Marked</td><td> </td><td class="right">     A.3.  Example Algorithm to Estimate Marked Bytes from Marked</td><td class="lineno"><br></td></tr>
      <tr id="diff0013"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">           Packets . . . . . . . . . . . . . . . . . . . . . . . . .  <span class="delete">55</span></td><td> </td><td class="rblock">           Packets . . . . . . . . . . . . . . . . . . . . . . . . .  <span class="insert">56</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">     A.4.  Example Algorithm to Count Not-ECT Bytes  . . . . . . . .  <span class="delete">56</span></td><td> </td><td class="rblock">     A.4.  Example Algorithm to Count Not-ECT Bytes  . . . . . . . .  <span class="insert">57</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   Appendix B.  Rationale for Usage of TCP Header Flags  . . . . . .  <span class="delete">56</span></td><td> </td><td class="rblock">   Appendix B.  Rationale for Usage of TCP Header Flags  . . . . . .  <span class="insert">57</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">     B.1.  Three TCP Header Flags in the SYN-SYN/ACK Handshake . . .  <span class="delete">56</span></td><td> </td><td class="rblock">     B.1.  Three TCP Header Flags in the SYN-SYN/ACK Handshake . . .  <span class="insert">57</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">     B.2.  Four Codepoints in the SYN/ACK  . . . . . . . . . . . . .  <span class="delete">57</span></td><td> </td><td class="rblock">     B.2.  Four Codepoints in the SYN/ACK  . . . . . . . . . . . . .  <span class="insert">58</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">     B.3.  Space for Future Evolution  . . . . . . . . . . . . . . .  <span class="delete">58</span></td><td> </td><td class="rblock">     B.3.  Space for Future Evolution  . . . . . . . . . . . . . . .  <span class="insert">59</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  <span class="delete">59</span></td><td> </td><td class="rblock">   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  <span class="insert">60</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">1.  Introduction</td><td> </td><td class="right">1.  Introduction</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Explicit Congestion Notification (ECN) [RFC3168] is a mechanism where</td><td> </td><td class="right">   Explicit Congestion Notification (ECN) [RFC3168] is a mechanism where</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   network nodes can mark IP packets instead of dropping them to</td><td> </td><td class="right">   network nodes can mark IP packets instead of dropping them to</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   indicate incipient congestion to the end-points.  Receivers with an</td><td> </td><td class="right">   indicate incipient congestion to the end-points.  Receivers with an</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   ECN-capable transport protocol feed back this information to the</td><td> </td><td class="right">   ECN-capable transport protocol feed back this information to the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   sender.  In RFC 3168, ECN was specified for TCP in such a way that</td><td> </td><td class="right">   sender.  In RFC 3168, ECN was specified for TCP in such a way that</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   only one feedback signal could be transmitted per Round-Trip Time</td><td> </td><td class="right">   only one feedback signal could be transmitted per Round-Trip Time</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   (RTT).  Recently, proposed mechanisms like Congestion Exposure (ConEx</td><td> </td><td class="right">   (RTT).  Recently, proposed mechanisms like Congestion Exposure (ConEx</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-4" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-4"><em> page 21, line 23<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-4"><em> page 21, line 23<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   | 0b100         | ECT(0)                      | 5                   |</td><td> </td><td class="right">   | 0b100         | ECT(0)                      | 5                   |</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   | 0b101         | Currently Unused {Note 2}   | 5                   |</td><td> </td><td class="right">   | 0b101         | Currently Unused {Note 2}   | 5                   |</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   | 0b110         | CE                          | 6                   |</td><td> </td><td class="right">   | 0b110         | CE                          | 6                   |</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   | 0b111         | Currently Unused {Note 2}   | 5                   |</td><td> </td><td class="right">   | 0b111         | Currently Unused {Note 2}   | 5                   |</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   +---------------+-----------------------------+---------------------+</td><td> </td><td class="right">   +---------------+-----------------------------+---------------------+</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">        Table 4: Meaning of the ACE field on the ACK of the SYN/ACK</td><td> </td><td class="right">        Table 4: Meaning of the ACE field on the ACK of the SYN/ACK</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   {Note 1}: If the server is in AccECN mode, the value of zero raises</td><td> </td><td class="right">   {Note 1}: If the server is in AccECN mode, the value of zero raises</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   suspicion of zeroing of the ACE field on the path (see</td><td> </td><td class="right">   suspicion of zeroing of the ACE field on the path (see</td><td class="lineno"><br></td></tr>
      <tr id="diff0014"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   Section 3.2.2.<span class="delete">3</span>).</td><td> </td><td class="rblock">   Section 3.2.2.<span class="insert">4</span>).</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   {Note 2}: If the server is in AccECN mode, these values are Currently</td><td> </td><td class="right">   {Note 2}: If the server is in AccECN mode, these values are Currently</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Unused but the AccECN server's behaviour is still defined for forward</td><td> </td><td class="right">   Unused but the AccECN server's behaviour is still defined for forward</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   compatibility.  Then the designer of a future protocol can know for</td><td> </td><td class="right">   compatibility.  Then the designer of a future protocol can know for</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   certain what AccECN servers will do with these codepoints.</td><td> </td><td class="right">   certain what AccECN servers will do with these codepoints.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   {Note 3}: In the case where a server that implements AccECN is also</td><td> </td><td class="right">   {Note 3}: In the case where a server that implements AccECN is also</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   using a stateless handshake (termed a SYN cookie) it will not</td><td> </td><td class="right">   using a stateless handshake (termed a SYN cookie) it will not</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   remember whether it entered AccECN mode.  The values 0b000 or 0b001</td><td> </td><td class="right">   remember whether it entered AccECN mode.  The values 0b000 or 0b001</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   will remind it that it did not enter AccECN mode, because AccECN does</td><td> </td><td class="right">   will remind it that it did not enter AccECN mode, because AccECN does</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-5" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-5"><em> page 23, line 32<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-5"><em> page 23, line 32<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      is not required.  Therefore, once in the ESTABLISHED state, it</td><td> </td><td class="right">      is not required.  Therefore, once in the ESTABLISHED state, it</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      will be sufficient for the server to consider the ACE field to be</td><td> </td><td class="right">      will be sufficient for the server to consider the ACE field to be</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      encoded as the normal ACE counter on all packets with SYN=0.</td><td> </td><td class="right">      encoded as the normal ACE counter on all packets with SYN=0.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      Reasoning: Such ACKs will be quite unusual, e.g. a SYN/ACK (or ACK</td><td> </td><td class="right">      Reasoning: Such ACKs will be quite unusual, e.g. a SYN/ACK (or ACK</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      of the SYN/ACK) that is delayed for longer than the server's</td><td> </td><td class="right">      of the SYN/ACK) that is delayed for longer than the server's</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      retransmission timeout; or packet duplication by the network.  And</td><td> </td><td class="right">      retransmission timeout; or packet duplication by the network.  And</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      the impact of any error in the feedback on such ACKs will only be</td><td> </td><td class="right">      the impact of any error in the feedback on such ACKs will only be</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      temporary.</td><td> </td><td class="right">      temporary.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0015"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">3.2.2.3.  Testing for <span class="delete">Zeroing of the ACE Field</span></td><td> </td><td class="rblock">3.2.2.3.  Testing for Mangling of the IP/ECN Field</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete"></span><br></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   Section 3.2.2 required the Data Receiver to initialize the r.cep</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   counter to a non-zero value.  Therefore, in either direction the</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   initial value of the ACE counter ought to be non-zero.</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete"></span><br></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   If AccECN has been successfully negotiated, the Data Sender SHOULD</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   check the value of the ACE counter in the first packet (with or</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   without data) that arrives with SYN=0.  If the value of this ACE</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   field is zero (0b000), the Data Sender disables sending ECN-capable</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   packets for the remainder of the half-connection by setting the IP/</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   ECN field in all subsequent packets to Not-ECT.</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete"></span><br></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   Usually, the server checks the ACK of the SYN/ACK from the client,</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   while the client checks the first data segment from the server.</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   However, if reordering occurs, "the first packet ... that arrives"</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   will not necessarily be the same as the first packet in sequence</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   order.  The test has been specified loosely like this to simplify</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   implementation, and because it would not have been any more precise</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   to have specified the first packet in sequence order, which would not</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   necessarily be the first ACE counter that the Data Receiver fed back</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   anyway, given it might have been a retransmission.</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete"></span><br></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   The possibility of re-ordering means that there is a small chance</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   that the ACE field on the first packet to arrive is genuinely zero</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   (without middlebox interference).  This would cause a host to</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   unnecessarily disable ECN for a half connection.  Therefore, in</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   environments where there is no evidence of the ACE field being</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   zeroed, implementations can skip this test.</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete"></span><br></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   Note that the Data Sender MUST NOT test whether the arriving counter</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   in the initial ACE field has been initialized to a specific valid</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   value - the above check solely tests whether the ACE fields have been</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   incorrectly zeroed.  This allows hosts to use different initial</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   values as an additional signalling channel in future.</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete"></span><br></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">3.2.2.4.  Testing for</span> Mangling of the IP/ECN Field</td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   The value of the ACE field on the SYN/ACK indicates the value of the</td><td> </td><td class="right">   The value of the ACE field on the SYN/ACK indicates the value of the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   IP/ECN field when the SYN arrived at the server.  The client can</td><td> </td><td class="right">   IP/ECN field when the SYN arrived at the server.  The client can</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   compare this with how it originally set the IP/ECN field on the SYN.</td><td> </td><td class="right">   compare this with how it originally set the IP/ECN field on the SYN.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   If this comparison implies an unsafe transition (see below) of the</td><td> </td><td class="right">   If this comparison implies an unsafe transition (see below) of the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   IP/ECN field, for the remainder of the connection the client MUST NOT</td><td> </td><td class="right">   IP/ECN field, for the remainder of the connection the client MUST NOT</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   send ECN-capable packets, but it MUST continue to feed back any ECN</td><td> </td><td class="right">   send ECN-capable packets, but it MUST continue to feed back any ECN</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   markings on arriving packets.</td><td> </td><td class="right">   markings on arriving packets.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   The value of the ACE field on the last ACK of the 3WHS indicates the</td><td> </td><td class="right">   The value of the ACE field on the last ACK of the 3WHS indicates the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-6" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-6"><em> page 25, line 26<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-6"><em> page 24, line 38<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   the connection, the Data Sender SHOULD NOT send ECN-capable packets,</td><td> </td><td class="right">   the connection, the Data Sender SHOULD NOT send ECN-capable packets,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   but it MUST continue to feed back any ECN markings on arriving</td><td> </td><td class="right">   but it MUST continue to feed back any ECN markings on arriving</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   packets.</td><td> </td><td class="right">   packets.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   The above fall-back behaviours are necessary in case mangling of the</td><td> </td><td class="right">   The above fall-back behaviours are necessary in case mangling of the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   IP/ECN field is asymmetric, which is currently common over some</td><td> </td><td class="right">   IP/ECN field is asymmetric, which is currently common over some</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   mobile networks [Mandalari18].  Then one end might see no unsafe</td><td> </td><td class="right">   mobile networks [Mandalari18].  Then one end might see no unsafe</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   transition and continue sending ECN-capable packets, while the other</td><td> </td><td class="right">   transition and continue sending ECN-capable packets, while the other</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   end sees an unsafe transition and stops sending ECN-capable packets.</td><td> </td><td class="right">   end sees an unsafe transition and stops sending ECN-capable packets.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0016"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">3.2.2.4.  Testing for Zeroing of the ACE Field</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert"></span><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   Section 3.2.2 required the Data Receiver to initialize the r.cep</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   counter to a non-zero value.  Therefore, in either direction the</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   initial value of the ACE counter ought to be non-zero.</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert"></span><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   If AccECN has been successfully negotiated, the Data Sender SHOULD</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   check the value of the ACE counter in the first packet (with or</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   without data) that arrives with SYN=0.  If the value of this ACE</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   field is zero (0b000), the Data Sender disables sending ECN-capable</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   packets for the remainder of the half-connection by setting the IP/</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   ECN field in all subsequent packets to Not-ECT.</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert"></span><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   Usually, the server checks the ACK of the SYN/ACK from the client,</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   while the client checks the first data segment from the server.</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   However, if reordering occurs, "the first packet ... that arrives"</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   will not necessarily be the same as the first packet in sequence</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   order.  The test has been specified loosely like this to simplify</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   implementation, and because it would not have been any more precise</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   to have specified the first packet in sequence order, which would not</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   necessarily be the first ACE counter that the Data Receiver fed back</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   anyway, given it might have been a retransmission.</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert"></span><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   The possibility of re-ordering means that there is a small chance</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   that the ACE field on the first packet to arrive is genuinely zero</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   (without middlebox interference).  This would cause a host to</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   unnecessarily disable ECN for a half connection.  Therefore, in</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   environments where there is no evidence of the ACE field being</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   zeroed, implementations can skip this test.</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert"></span><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   Note that the Data Sender MUST NOT test whether the arriving counter</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   in the initial ACE field has been initialized to a specific valid</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   value - the above check solely tests whether the ACE fields have been</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   incorrectly zeroed.  This allows hosts to use different initial</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   values as an additional signalling channel in future.</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">3.2.2.5.  Safety against Ambiguity of the ACE Field</td><td> </td><td class="right">3.2.2.5.  Safety against Ambiguity of the ACE Field</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   If too many CE-marked segments are acknowledged at once, or if a long</td><td> </td><td class="right">   If too many CE-marked segments are acknowledged at once, or if a long</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   run of ACKs is lost or thinned out, the 3-bit counter in the ACE</td><td> </td><td class="right">   run of ACKs is lost or thinned out, the 3-bit counter in the ACE</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   field might have cycled between two ACKs arriving at the Data Sender.</td><td> </td><td class="right">   field might have cycled between two ACKs arriving at the Data Sender.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   The following safety procedures minimize this ambiguity.</td><td> </td><td class="right">   The following safety procedures minimize this ambiguity.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">3.2.2.5.1.  Data Receiver Safety Procedures</td><td> </td><td class="right">3.2.2.5.1.  Data Receiver Safety Procedures</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   The following rules define when a Data Receiver in AccECN mode emits</td><td> </td><td class="right">   The following rules define when a Data Receiver in AccECN mode emits</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-7" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-7"><em> page 32, line 31<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-7"><em> page 32, line 39<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   If a host is in the mode that assumes incoming AccECN Options are not</td><td> </td><td class="right">   If a host is in the mode that assumes incoming AccECN Options are not</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   available, but it receives an AccECN Option at any later point during</td><td> </td><td class="right">   available, but it receives an AccECN Option at any later point during</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   the connection, this clearly indicates that the AccECN Option is not</td><td> </td><td class="right">   the connection, this clearly indicates that the AccECN Option is not</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   blocked on the respective path, and the AccECN endpoint MAY switch</td><td> </td><td class="right">   blocked on the respective path, and the AccECN endpoint MAY switch</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   out of the mode that assumes the AccECN Option is not available for</td><td> </td><td class="right">   out of the mode that assumes the AccECN Option is not available for</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   this half connection.</td><td> </td><td class="right">   this half connection.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">3.2.3.2.4.  Test for Zeroing of the AccECN Option</td><td> </td><td class="right">3.2.3.2.4.  Test for Zeroing of the AccECN Option</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   For a related test for invalid initialization of the ACE field, see</td><td> </td><td class="right">   For a related test for invalid initialization of the ACE field, see</td><td class="lineno"><br></td></tr>
      <tr id="diff0017"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   Section 3.2.2.<span class="delete">3</span></td><td> </td><td class="rblock">   Section 3.2.2.<span class="insert">4</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Section 3.2 required the Data Receiver to initialize the r.e0b</td><td> </td><td class="right">   Section 3.2 required the Data Receiver to initialize the r.e0b</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   counter to a non-zero value.  Therefore, in either direction the</td><td> </td><td class="right">   counter to a non-zero value.  Therefore, in either direction the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   initial value of the EE0B field in the AccECN Option (if one exists)</td><td> </td><td class="right">   initial value of the EE0B field in the AccECN Option (if one exists)</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   ought to be non-zero.  If AccECN has been negotiated:</td><td> </td><td class="right">   ought to be non-zero.  If AccECN has been negotiated:</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   o  the TCP server MAY check the initial value of the EE0B field in</td><td> </td><td class="right">   o  the TCP server MAY check the initial value of the EE0B field in</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      the first segment that acknowledges sequence space that at least</td><td> </td><td class="right">      the first segment that acknowledges sequence space that at least</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      covers the ISN plus 1.  If the initial value of the EE0B field is</td><td> </td><td class="right">      covers the ISN plus 1.  If the initial value of the EE0B field is</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      zero, the server will switch into a mode that ignores the AccECN</td><td> </td><td class="right">      zero, the server will switch into a mode that ignores the AccECN</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-8" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-8"><em> page 33, line 18<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-8"><em> page 33, line 27<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   fields have been incorrectly zeroed.  This allows hosts to use</td><td> </td><td class="right">   fields have been incorrectly zeroed.  This allows hosts to use</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   different initial values as an additional signalling channel in</td><td> </td><td class="right">   different initial values as an additional signalling channel in</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   future.  Also note that the initial value of either field might be</td><td> </td><td class="right">   future.  Also note that the initial value of either field might be</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   greater than its expected initial value, because the counters might</td><td> </td><td class="right">   greater than its expected initial value, because the counters might</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   already have been incremented.  Nonetheless, the initial values of</td><td> </td><td class="right">   already have been incremented.  Nonetheless, the initial values of</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   the counters have been chosen so that they cannot wrap to zero on</td><td> </td><td class="right">   the counters have been chosen so that they cannot wrap to zero on</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   these initial segments.</td><td> </td><td class="right">   these initial segments.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">3.2.3.2.5.  Consistency between AccECN Feedback Fields</td><td> </td><td class="right">3.2.3.2.5.  Consistency between AccECN Feedback Fields</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0018"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   When the AccECN Option is available it supplements but does not</td><td> </td><td class="rblock">   When the AccECN Option is available it <span class="insert">ought to provide more</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   replace the ACE field.  An endpoint using AccECN feedback MUST always</td><td> </td><td class="rblock"><span class="insert">   unambiguous feedback.  However, it</span> supplements but does not replace</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   <span class="delete">consider</span> the information provided in the ACE field <span class="delete">whether or</span> not the</td><td> </td><td class="rblock">   the ACE field.  An endpoint using AccECN feedback MUST always</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   AccECN <span class="delete">Option is also available.</span></td><td> </td><td class="rblock">   <span class="insert">reconcile</span> the information provided in the ACE field <span class="insert">with that in any</span></td><td class="lineno">!!<br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   AccECN Option, so that the state of the ACE-related packet counter</span></td><td class="lineno">!!<br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   can be relied on if future feedback does</span> not <span class="insert">carry</span> the AccECN <span class="insert">Option.</span></td><td class="lineno">!!<br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   If the AccECN option is present, the s.cep counter might increase</td><td> </td><td class="right">   If the AccECN option is present, the s.cep counter might increase</td><td class="lineno"><br></td></tr>
      <tr id="diff0019"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   <span class="delete">while</span> the s.ceb counter <span class="delete">does not</span> (e.g. due to a CE-marked control</td><td> </td><td class="rblock">   <span class="insert">more than expected from the increase of</span> the s.ceb counter (e.g. due</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   packet).  The sender's response to such a situation is out of scope,</td><td> </td><td class="rblock">   to a CE-marked control packet).  The sender's response to such a</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   and needs to be dealt with in a specification that uses ECN-capable</td><td> </td><td class="rblock">   situation is out of scope, and needs to be dealt with in a</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   control packets.  Theoretically, this situation could also occur if a</td><td> </td><td class="rblock">   specification that uses ECN-capable control packets.  Theoretically,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   middlebox mangled the AccECN Option but not the ACE field.  However,</td><td> </td><td class="rblock">   this situation could also occur if a middlebox mangled the AccECN</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   the Data Sender has to assume that the integrity of the AccECN Option</td><td> </td><td class="rblock">   Option but not the ACE field.  However, the Data Sender has to assume</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   is sound, based on the above test of the well-known initial values</td><td> </td><td class="rblock">   that the integrity of the AccECN Option is sound, based on the above</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   and optionally other integrity tests (Section 5.3).</td><td> </td><td class="rblock">   test of the well-known initial values and optionally other integrity</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">   tests (Section 5.3).</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   If either end-point detects that the s.ceb counter has increased but</td><td> </td><td class="right">   If either end-point detects that the s.ceb counter has increased but</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   the s.cep has not (and by testing ACK coverage it is certain how much</td><td> </td><td class="right">   the s.cep has not (and by testing ACK coverage it is certain how much</td><td class="lineno"><br></td></tr>
      <tr id="diff0020"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   the ACE field has wrapped), <span class="delete">this</span> invalid protocol transition <span class="delete">has to</span></td><td> </td><td class="rblock">   the ACE field has wrapped), <span class="insert">and if there is no other explanation that</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   be</span> due to some form of feedback <span class="delete">mangling.  So,</span> the Data Sender MUST</td><td> </td><td class="rblock"><span class="insert">   an</span> invalid protocol transition due to some form of feedback <span class="insert">mangling,</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   disable sending ECN-capable packets for the remainder of the <span class="delete">half-</span></td><td> </td><td class="rblock">   the Data Sender MUST disable sending ECN-capable packets for the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   connection</span> by setting the IP/ECN field in all subsequent packets to</td><td> </td><td class="rblock">   remainder of the <span class="insert">half-connection</span> by setting the IP/ECN field in all</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   Not-ECT.</td><td> </td><td class="rblock">   subsequent packets to Not-ECT.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">3.2.3.3.  Usage of the AccECN TCP Option</td><td> </td><td class="right">3.2.3.3.  Usage of the AccECN TCP Option</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   If a Data Receiver in AccECN mode intends to use the AccECN TCP</td><td> </td><td class="right">   If a Data Receiver in AccECN mode intends to use the AccECN TCP</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Option to provide feedback, the rules below determine when it</td><td> </td><td class="right">   Option to provide feedback, the rules below determine when it</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   includes an AccECN TCP Option, and which fields to include, given</td><td> </td><td class="right">   includes an AccECN TCP Option, and which fields to include, given</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   other options might be competing for limited option space:</td><td> </td><td class="right">   other options might be competing for limited option space:</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Importance of Congestion Control:  AccECN is for congestion control,</td><td> </td><td class="right">   Importance of Congestion Control:  AccECN is for congestion control,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      which SHOULD generally be considered important relative to other</td><td> </td><td class="right">      which SHOULD generally be considered important relative to other</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-9" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-9"><em> page 48, line 8<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-9"><em> page 48, line 23<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">11.2.  Informative References</td><td> </td><td class="right">11.2.  Informative References</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [I-D.ietf-tcpm-2140bis]</td><td> </td><td class="right">   [I-D.ietf-tcpm-2140bis]</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              Touch, J., Welzl, M., and S. Islam, "TCP Control Block</td><td> </td><td class="right">              Touch, J., Welzl, M., and S. Islam, "TCP Control Block</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              Interdependence", draft-ietf-tcpm-2140bis-11 (work in</td><td> </td><td class="right">              Interdependence", draft-ietf-tcpm-2140bis-11 (work in</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              progress), April 2021.</td><td> </td><td class="right">              progress), April 2021.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [I-D.ietf-tcpm-generalized-ecn]</td><td> </td><td class="right">   [I-D.ietf-tcpm-generalized-ecn]</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              Bagnulo, M. and B. Briscoe, "ECN++: Adding Explicit</td><td> </td><td class="right">              Bagnulo, M. and B. Briscoe, "ECN++: Adding Explicit</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              Congestion Notification (ECN) to TCP Control Packets",</td><td> </td><td class="right">              Congestion Notification (ECN) to TCP Control Packets",</td><td class="lineno"><br></td></tr>
      <tr id="diff0021"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">              <span class="delete">draft-ietf-tcpm-generalized-ecn-07</span> (work in progress),</td><td> </td><td class="rblock">              <span class="insert">draft-ietf-tcpm-generalized-ecn-09</span> (work in progress),</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">              <span class="delete">February 2021.</span></td><td> </td><td class="rblock">              <span class="insert">January 2022.</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [I-D.ietf-tsvwg-l4s-arch]</td><td> </td><td class="right">   [I-D.ietf-tsvwg-l4s-arch]</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              Briscoe, B., Schepper, K. D., Bagnulo, M., and G. White,</td><td> </td><td class="right">              Briscoe, B., Schepper, K. D., Bagnulo, M., and G. White,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              "Low Latency, Low Loss, Scalable Throughput (L4S) Internet</td><td> </td><td class="right">              "Low Latency, Low Loss, Scalable Throughput (L4S) Internet</td><td class="lineno"><br></td></tr>
      <tr id="diff0022"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">              Service: Architecture", <span class="delete">draft-ietf-tsvwg-l4s-arch-08</span> (work</td><td> </td><td class="rblock">              Service: Architecture", <span class="insert">draft-ietf-tsvwg-l4s-arch-16</span> (work</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">              in progress), <span class="delete">November 2020.</span></td><td> </td><td class="rblock">              in progress), <span class="insert">February 2022.</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [Mandalari18]</td><td> </td><td class="right">   [Mandalari18]</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              Mandalari, A., Lutu, A., Briscoe, B., Bagnulo, M., and Oe.</td><td> </td><td class="right">              Mandalari, A., Lutu, A., Briscoe, B., Bagnulo, M., and Oe.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              Alay, "Measuring ECN++: Good News for ++, Bad News for ECN</td><td> </td><td class="right">              Alay, "Measuring ECN++: Good News for ++, Bad News for ECN</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              over Mobile", IEEE Communications Magazine , March 2018.</td><td> </td><td class="right">              over Mobile", IEEE Communications Magazine , March 2018.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [RFC2018]  Mathis, M., Mahdavi, J., Floyd, S., and A. Romanow, "TCP</td><td> </td><td class="right">   [RFC2018]  Mathis, M., Mahdavi, J., Floyd, S., and A. Romanow, "TCP</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              Selective Acknowledgment Options", RFC 2018,</td><td> </td><td class="right">              Selective Acknowledgment Options", RFC 2018,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              DOI 10.17487/RFC2018, October 1996,</td><td> </td><td class="right">              DOI 10.17487/RFC2018, October 1996,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc2018&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc2018&gt;.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-10" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-10"><em> page 53, line 7<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-10"><em> page 54, line 7<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       dSafer.cep = newlyAckedPkt - ((newlyAckedPkt - d.cep) % DIVACE),</td><td> </td><td class="right">       dSafer.cep = newlyAckedPkt - ((newlyAckedPkt - d.cep) % DIVACE),</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   For example, imagine an ACK acknowledges newlyAckedPkt=9 more full-</td><td> </td><td class="right">   For example, imagine an ACK acknowledges newlyAckedPkt=9 more full-</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   size segments than any previous ACK, and that ACE increments by a</td><td> </td><td class="right">   size segments than any previous ACK, and that ACE increments by a</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   minimum of 2 CE marks (d.cep=2).  The above formula works out that it</td><td> </td><td class="right">   minimum of 2 CE marks (d.cep=2).  The above formula works out that it</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   would still be safe to assume 2 CE marks (because 9 - ((9-2) % 8) =</td><td> </td><td class="right">   would still be safe to assume 2 CE marks (because 9 - ((9-2) % 8) =</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   2).  However, if ACE increases by a minimum of 2 but acknowledges 10</td><td> </td><td class="right">   2).  However, if ACE increases by a minimum of 2 but acknowledges 10</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   full-sized segments, then it would be necessary to assume that there</td><td> </td><td class="right">   full-sized segments, then it would be necessary to assume that there</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   could have been 10 CE marks (because 10 - ((10-2) % 8) = 10).</td><td> </td><td class="right">   could have been 10 CE marks (because 10 - ((10-2) % 8) = 10).</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0023"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">   <span class="insert">Note that checks would need to be added to the above pseudocode for</span></td><td class="lineno">!!<br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   (d.cep &gt; newlyAckedPkt), which could occur if newlyAckedPkt had been</span></td><td class="lineno">!!<br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   wrongly estimated using an inappropriate packet size.</span></td><td class="lineno">!!<br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   ACKs that acknowledge a large stretch of packets might be common in</td><td> </td><td class="right">   ACKs that acknowledge a large stretch of packets might be common in</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   data centres to achieve a high packet rate or might be due to ACK</td><td> </td><td class="right">   data centres to achieve a high packet rate or might be due to ACK</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   thinning by a middlebox.  In these cases, cycling of the ACE field</td><td> </td><td class="right">   thinning by a middlebox.  In these cases, cycling of the ACE field</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   would often appear to have been possible, so the above algorithm</td><td> </td><td class="right">   would often appear to have been possible, so the above algorithm</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   would be over-conservative, leading to a false high marking rate and</td><td> </td><td class="right">   would be over-conservative, leading to a false high marking rate and</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   poor performance.  Therefore it would be reasonable to only use</td><td> </td><td class="right">   poor performance.  Therefore it would be reasonable to only use</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   dSafer.cep rather than d.cep if the moving average of newlyAckedPkt</td><td> </td><td class="right">   dSafer.cep rather than d.cep if the moving average of newlyAckedPkt</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   was well below 8.</td><td> </td><td class="right">   was well below 8.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Implementers could build in more heuristics to estimate prevailing</td><td> </td><td class="right">   Implementers could build in more heuristics to estimate prevailing</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-11" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-11"><em> page 58, line 34<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-11"><em> page 59, line 38<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      number arrive with the pattern tagged as 'Broken'.  The 'Nonce'</td><td> </td><td class="right">      number arrive with the pattern tagged as 'Broken'.  The 'Nonce'</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      pattern could be a sign that a few servers have implemented the</td><td> </td><td class="right">      pattern could be a sign that a few servers have implemented the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      ECN Nonce [RFC3540], which has now been reclassified as historic</td><td> </td><td class="right">      ECN Nonce [RFC3540], which has now been reclassified as historic</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      [RFC8311], or it could be the random result of some unknown</td><td> </td><td class="right">      [RFC8311], or it could be the random result of some unknown</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      middlebox behaviour.  The greater prevalence of the 'Broken'</td><td> </td><td class="right">      middlebox behaviour.  The greater prevalence of the 'Broken'</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      pattern suggests that some instances still exist of the broken</td><td> </td><td class="right">      pattern suggests that some instances still exist of the broken</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      code that reflects the reserved flags on the SYN.</td><td> </td><td class="right">      code that reflects the reserved flags on the SYN.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      The requirement not to reject unexpected initial values of the ACE</td><td> </td><td class="right">      The requirement not to reject unexpected initial values of the ACE</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      counter (in the main TCP header) in the last para of</td><td> </td><td class="right">      counter (in the main TCP header) in the last para of</td><td class="lineno"><br></td></tr>
      <tr id="diff0024"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      Section 3.2.2.<span class="delete">3</span> ensures that 3 unused codepoints on the ACK of the</td><td> </td><td class="rblock">      Section 3.2.2.<span class="insert">4</span> ensures that 3 unused codepoints on the ACK of the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      SYN/ACK, 6 unused values on the first SYN=0 data packet from the</td><td> </td><td class="right">      SYN/ACK, 6 unused values on the first SYN=0 data packet from the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      client and 7 unused values on the first SYN=0 data packet from the</td><td> </td><td class="right">      client and 7 unused values on the first SYN=0 data packet from the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      server could be used to declare future variants of the AccECN</td><td> </td><td class="right">      server could be used to declare future variants of the AccECN</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      protocol.  The word 'declare' is used rather than 'negotiate'</td><td> </td><td class="right">      protocol.  The word 'declare' is used rather than 'negotiate'</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      because, at this late stage in the 3WHS, it would be too late for</td><td> </td><td class="right">      because, at this late stage in the 3WHS, it would be too late for</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      a negotiation between the endpoints to be completed.  A similar</td><td> </td><td class="right">      a negotiation between the endpoints to be completed.  A similar</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      requirement not to reject unexpected initial values in the TCP</td><td> </td><td class="right">      requirement not to reject unexpected initial values in the TCP</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      option (Section 3.2.3.2.4) is for the same purpose.  If traversal</td><td> </td><td class="right">      option (Section 3.2.3.2.4) is for the same purpose.  If traversal</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      of the TCP option were reliable, this would have enabled a far</td><td> </td><td class="right">      of the TCP option were reliable, this would have enabled a far</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      wider range of future variation of the whole AccECN protocol.</td><td> </td><td class="right">      wider range of future variation of the whole AccECN protocol.</td><td class="lineno"><br></td></tr>

     <tr><td><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td><br></td></tr>
     <tr id="end" bgcolor="gray"><th colspan="5" align="center">&nbsp;End of changes. 24 change blocks.&nbsp;</th></tr>
     <tr class="stats"><td><br></td><th><i>86 lines changed or deleted</i></th><th><i> </i><br>
</th><th><i>93 lines changed or added</i></th><td><br></td></tr>
     <tr><td colspan="5" class="small" align="center"><br>This html diff was produced by rfcdiff 1.45. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/">http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </tbody></table>
   
   
</body></html>