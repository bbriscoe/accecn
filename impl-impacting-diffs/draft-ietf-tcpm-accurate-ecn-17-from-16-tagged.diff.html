<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by rfcdiff 1.45: rfcdiff  -->
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux c728f7009bdd 5.14.21-150400.24.38-default #1 SMP PREEMPT_DYNAMIC Fri Dec 9 09:29:22 UTC 2022 (e9c5676) x86_64 x86_64 x86_64 GNU/Linux -->
<!-- Using awk: /usr/bin/gawk: GNU Awk 5.1.0, API: 3.0 (GNU MPFR 4.1.0, GNU MP 6.2.1) -->
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.8 -->
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.2 -->
<html xmlns="http://www.w3.org/1999/xhtml"><head> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
  <meta http-equiv="Content-Style-Type" content="text/css"> 
  <title>Diff: draft-ietf-tcpm-accurate-ecn-16.txt - draft-ietf-tcpm-accurate-ecn-17.txt</title> 
  <style type="text/css"> 
    body    { margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
    span.hide { display: none; color: #aaa;}    a:hover span { display: inline; }    tr.change { background-color: gray; } 
    tr.change a { text-decoration: none; color: black } 
  </style> 
     <script>
var chunk_index = 0;
var old_chunk = null;

function format_chunk(index) {
    var prefix = "diff";
    var str = index.toString();
    for (x=0; x<(4-str.length); ++x) {
        prefix+='0';
    }
    return prefix + str;
}

function find_chunk(n){
    return document.querySelector('tr[id$="' + n + '"]');
}

function change_chunk(offset) {
    var index = chunk_index + offset;
    var new_str;
    var new_chunk;

    new_str = format_chunk(index);
    new_chunk = find_chunk(new_str);
    if (!new_chunk) {
        return;
    }
    if (old_chunk) {
        old_chunk.style.outline = "";
    }
    old_chunk = new_chunk;
    old_chunk.style.outline = "1px solid red";
    window.location.hash = "#" + new_str;
    window.scrollBy(0,-100);
    chunk_index = index;
}

document.onkeydown = function(e) {
    switch (e.keyCode) {
    case 78:
        change_chunk(1);
        break;
    case 80:
        change_chunk(-1);
        break;
    }
};
   </script> 
</head> 
<body> 
  <table border="0" cellspacing="0" cellpadding="0"> 
  <tbody><tr id="part-1" bgcolor="orange"><th><br>
</th><th>&nbsp;draft-ietf-tcpm-accurate-ecn-16.txt&nbsp;</th><th> <br>
</th><th>&nbsp;draft-ietf-tcpm-accurate-ecn-17.txt&nbsp;</th><th><br>
</th></tr> 
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">TCP Maintenance &amp; Minor Extensions (tcpm)                     B. Briscoe</td><td> </td><td class="right">TCP Maintenance &amp; Minor Extensions (tcpm)                     B. Briscoe</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">Internet-Draft                                               Independent</td><td> </td><td class="right">Internet-Draft                                               Independent</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">Updates: 3168, 3449 (if approved)                          M. Kuehlewind</td><td> </td><td class="right">Updates: 3168, 3449 (if approved)                          M. Kuehlewind</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">Intended status: Standards Track                                Ericsson</td><td> </td><td class="right">Intended status: Standards Track                                Ericsson</td><td class="lineno"><br></td></tr>
      <tr id="diff0001"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">Expires: <span class="delete">August 7, 2022   </span>                              R. Scheffenegger</td><td> </td><td class="rblock">Expires: <span class="insert">September 8, 2022</span>                              R. Scheffenegger</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">                                                                  NetApp</td><td> </td><td class="right">                                                                  NetApp</td><td class="lineno"><br></td></tr>
      <tr id="diff0002"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">                                                        <span class="delete">February 3</span>, 2022</td><td> </td><td class="rblock">                                                        <span class="insert">   March 7</span>, 2022</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">                   More Accurate ECN Feedback in TCP</td><td> </td><td class="right">                   More Accurate ECN Feedback in TCP</td><td class="lineno"><br></td></tr>
      <tr id="diff0003"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">                    draft-ietf-tcpm-accurate-ecn-1<span class="delete">6</span></td><td> </td><td class="rblock">                    draft-ietf-tcpm-accurate-ecn-1<span class="insert">7</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">Abstract</td><td> </td><td class="right">Abstract</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Explicit Congestion Notification (ECN) is a mechanism where network</td><td> </td><td class="right">   Explicit Congestion Notification (ECN) is a mechanism where network</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   nodes can mark IP packets instead of dropping them to indicate</td><td> </td><td class="right">   nodes can mark IP packets instead of dropping them to indicate</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   incipient congestion to the end-points.  Receivers with an ECN-</td><td> </td><td class="right">   incipient congestion to the end-points.  Receivers with an ECN-</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   capable transport protocol feed back this information to the sender.</td><td> </td><td class="right">   capable transport protocol feed back this information to the sender.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   ECN was originally specified for TCP in such a way that only one</td><td> </td><td class="right">   ECN was originally specified for TCP in such a way that only one</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   feedback signal can be transmitted per Round-Trip Time (RTT).  Recent</td><td> </td><td class="right">   feedback signal can be transmitted per Round-Trip Time (RTT).  Recent</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   new TCP mechanisms like Congestion Exposure (ConEx), Data Center TCP</td><td> </td><td class="right">   new TCP mechanisms like Congestion Exposure (ConEx), Data Center TCP</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   (DCTCP) or Low Latency Low Loss Scalable Throughput (L4S) need more</td><td> </td><td class="right">   (DCTCP) or Low Latency Low Loss Scalable Throughput (L4S) need more</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   accurate ECN feedback information whenever more than one marking is</td><td> </td><td class="right">   accurate ECN feedback information whenever more than one marking is</td><td class="lineno"><br></td></tr>
      <tr id="diff0004"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   received in one RTT.  This document <span class="delete">specifies</span> a scheme to provide</td><td> </td><td class="rblock">   received in one RTT.  This document <span class="insert">updates the original ECN</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   more than one feedback signal per RTT in the TCP header.  Given TCP</td><td> </td><td class="rblock"><span class="insert">   specification to specify</span> a scheme to provide more than one feedback</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   header space is scarce, it allocates a reserved header bit previously</td><td> </td><td class="rblock">   signal per RTT in the TCP header.  Given TCP header space is scarce,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   assigned to the <span class="delete">ECN-Nonce.</span>  It also overloads the two existing ECN</td><td> </td><td class="rblock">   it allocates a reserved header bit previously assigned to the <span class="insert">ECN-</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   flags in the TCP header.  The resulting extra space is exploited to</td><td> </td><td class="rblock"><span class="insert">   Nonce.</span>  It also overloads the two existing ECN flags in the TCP</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   feed back the <span class="delete">IP-ECN</span> field received during the 3-way handshake as</td><td> </td><td class="rblock">   header.  The resulting extra space is exploited to feed back the <span class="insert">IP-</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   well.  Supplementary feedback information can optionally be provided</td><td> </td><td class="rblock"><span class="insert">   ECN</span> field received during the 3-way handshake as well.  Supplementary</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   in a new TCP option, which is never used on the TCP SYN.  The</td><td> </td><td class="rblock">   feedback information can optionally be provided in a new TCP option,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   document also specifies the treatment of this updated TCP wire</td><td> </td><td class="rblock">   which is never used on the TCP SYN.  The document also specifies the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   protocol by <span class="delete">middleboxes.</span></td><td> </td><td class="rblock">   treatment of this updated TCP wire protocol by <span class="insert">middleboxes, updating</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   BCP 69 with respect to ACK filtering.</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">Status of This Memo</td><td> </td><td class="right">Status of This Memo</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   This Internet-Draft is submitted in full conformance with the</td><td> </td><td class="right">   This Internet-Draft is submitted in full conformance with the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   provisions of BCP 78 and BCP 79.</td><td> </td><td class="right">   provisions of BCP 78 and BCP 79.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Internet-Drafts are working documents of the Internet Engineering</td><td> </td><td class="right">   Internet-Drafts are working documents of the Internet Engineering</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Task Force (IETF).  Note that other groups may also distribute</td><td> </td><td class="right">   Task Force (IETF).  Note that other groups may also distribute</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   working documents as Internet-Drafts.  The list of current Internet-</td><td> </td><td class="right">   working documents as Internet-Drafts.  The list of current Internet-</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Drafts is at https://datatracker.ietf.org/drafts/current/.</td><td> </td><td class="right">   Drafts is at https://datatracker.ietf.org/drafts/current/.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Internet-Drafts are draft documents valid for a maximum of six months</td><td> </td><td class="right">   Internet-Drafts are draft documents valid for a maximum of six months</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   and may be updated, replaced, or obsoleted by other documents at any</td><td> </td><td class="right">   and may be updated, replaced, or obsoleted by other documents at any</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   time.  It is inappropriate to use Internet-Drafts as reference</td><td> </td><td class="right">   time.  It is inappropriate to use Internet-Drafts as reference</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   material or to cite them other than as "work in progress."</td><td> </td><td class="right">   material or to cite them other than as "work in progress."</td><td class="lineno"><br></td></tr>
      <tr id="diff0005"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   This Internet-Draft will expire on <span class="delete">August 7,</span> 2022.</td><td> </td><td class="rblock">                                                                         </td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">   This Internet-Draft will expire on <span class="insert">September 8,</span> 2022.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">Copyright Notice</td><td> </td><td class="right">Copyright Notice</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Copyright (c) 2022 IETF Trust and the persons identified as the</td><td> </td><td class="right">   Copyright (c) 2022 IETF Trust and the persons identified as the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   document authors.  All rights reserved.</td><td> </td><td class="right">   document authors.  All rights reserved.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   This document is subject to BCP 78 and the IETF Trust's Legal</td><td> </td><td class="right">   This document is subject to BCP 78 and the IETF Trust's Legal</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Provisions Relating to IETF Documents</td><td> </td><td class="right">   Provisions Relating to IETF Documents</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   (https://trustee.ietf.org/license-info) in effect on the date of</td><td> </td><td class="right">   (https://trustee.ietf.org/license-info) in effect on the date of</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   publication of this document.  Please review these documents</td><td> </td><td class="right">   publication of this document.  Please review these documents</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-2" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-2"><em> page 2, line 26<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-2"><em> page 2, line 29<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   to this document.  Code Components extracted from this document must</td><td> </td><td class="right">   to this document.  Code Components extracted from this document must</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   include Simplified BSD License text as described in Section 4.e of</td><td> </td><td class="right">   include Simplified BSD License text as described in Section 4.e of</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   the Trust Legal Provisions and are provided without warranty as</td><td> </td><td class="right">   the Trust Legal Provisions and are provided without warranty as</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   described in the Simplified BSD License.</td><td> </td><td class="right">   described in the Simplified BSD License.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">Table of Contents</td><td> </td><td class="right">Table of Contents</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   3</td><td> </td><td class="right">   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   3</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     1.1.  Document Roadmap  . . . . . . . . . . . . . . . . . . . .   5</td><td> </td><td class="right">     1.1.  Document Roadmap  . . . . . . . . . . . . . . . . . . . .   5</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     1.2.  Goals . . . . . . . . . . . . . . . . . . . . . . . . . .   5</td><td> </td><td class="right">     1.2.  Goals . . . . . . . . . . . . . . . . . . . . . . . . . .   5</td><td class="lineno"><br></td></tr>
      <tr id="diff0006"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">     1.3.  Terminology . . . . . . . . . . . . . . . . . . . . . . .   <span class="delete">5</span></td><td> </td><td class="rblock">     1.3.  Terminology . . . . . . . . . . . . . . . . . . . . . . .   <span class="insert">6</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     1.4.  Recap of Existing ECN feedback in IP/TCP  . . . . . . . .   6</td><td> </td><td class="right">     1.4.  Recap of Existing ECN feedback in IP/TCP  . . . . . . . .   6</td><td class="lineno"><br></td></tr>
      <tr id="diff0007"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   2.  AccECN Protocol Overview and Rationale  . . . . . . . . . . .   <span class="delete">7</span></td><td> </td><td class="rblock">   2.  AccECN Protocol Overview and Rationale  . . . . . . . . . . .   <span class="insert">8</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">     2.1.  Capability Negotiation  . . . . . . . . . . . . . . . . .   <span class="delete">8</span></td><td> </td><td class="rblock">     2.1.  Capability Negotiation  . . . . . . . . . . . . . . . . .   <span class="insert">9</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     2.2.  Feedback Mechanism  . . . . . . . . . . . . . . . . . . .   9</td><td> </td><td class="right">     2.2.  Feedback Mechanism  . . . . . . . . . . . . . . . . . . .   9</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     2.3.  Delayed ACKs and Resilience Against ACK Loss  . . . . . .   9</td><td> </td><td class="right">     2.3.  Delayed ACKs and Resilience Against ACK Loss  . . . . . .   9</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     2.4.  Feedback Metrics  . . . . . . . . . . . . . . . . . . . .  10</td><td> </td><td class="right">     2.4.  Feedback Metrics  . . . . . . . . . . . . . . . . . . . .  10</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     2.5.  Generic (Dumb) Reflector  . . . . . . . . . . . . . . . .  11</td><td> </td><td class="right">     2.5.  Generic (Dumb) Reflector  . . . . . . . . . . . . . . . .  11</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   3.  AccECN Protocol Specification . . . . . . . . . . . . . . . .  12</td><td> </td><td class="right">   3.  AccECN Protocol Specification . . . . . . . . . . . . . . . .  12</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     3.1.  Negotiating to use AccECN . . . . . . . . . . . . . . . .  12</td><td> </td><td class="right">     3.1.  Negotiating to use AccECN . . . . . . . . . . . . . . . .  12</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       3.1.1.  Negotiation during the TCP handshake  . . . . . . . .  12</td><td> </td><td class="right">       3.1.1.  Negotiation during the TCP handshake  . . . . . . . .  12</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       3.1.2.  Backward Compatibility  . . . . . . . . . . . . . . .  13</td><td> </td><td class="right">       3.1.2.  Backward Compatibility  . . . . . . . . . . . . . . .  13</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       3.1.3.  Forward Compatibility . . . . . . . . . . . . . . . .  15</td><td> </td><td class="right">       3.1.3.  Forward Compatibility . . . . . . . . . . . . . . . .  15</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       3.1.4.  Retransmission of the SYN . . . . . . . . . . . . . .  15</td><td> </td><td class="right">       3.1.4.  Retransmission of the SYN . . . . . . . . . . . . . .  15</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       3.1.5.  Implications of AccECN Mode . . . . . . . . . . . . .  16</td><td> </td><td class="right">       3.1.5.  Implications of AccECN Mode . . . . . . . . . . . . .  16</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     3.2.  AccECN Feedback . . . . . . . . . . . . . . . . . . . . .  18</td><td> </td><td class="right">     3.2.  AccECN Feedback . . . . . . . . . . . . . . . . . . . . .  18</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       3.2.1.  Initialization of Feedback Counters . . . . . . . . .  18</td><td> </td><td class="right">       3.2.1.  Initialization of Feedback Counters . . . . . . . . .  18</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       3.2.2.  The ACE Field . . . . . . . . . . . . . . . . . . . .  19</td><td> </td><td class="right">       3.2.2.  The ACE Field . . . . . . . . . . . . . . . . . . . .  19</td><td class="lineno"><br></td></tr>
      <tr id="diff0008"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">         <span class="insert">3.2.2.1.  ACE Field on the ACK of the SYN/ACK . . . . . . .  20</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">         3.2.2.2.  Encoding and Decoding Feedback in the ACE Field .  21</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">         3.2.2.3.  Testing for Mangling of the IP/ECN Field  . . . .  23</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">         3.2.2.4.  Testing for Zeroing of the ACE Field  . . . . . .  24</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">         3.2.2.5.  Safety against Ambiguity of the ACE Field . . . .  25</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       3.2.3.  The AccECN Option . . . . . . . . . . . . . . . . . .  28</td><td> </td><td class="right">       3.2.3.  The AccECN Option . . . . . . . . . . . . . . . . . .  28</td><td class="lineno"><br></td></tr>
      <tr id="diff0009"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">         <span class="insert">3.2.3.1.  Encoding and Decoding Feedback in the AccECN</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">                   Option Fields . . . . . . . . . . . . . . . . . .  30</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">         3.2.3.2.  Path Traversal of the AccECN Option . . . . . . .  30</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">         3.2.3.3.  Usage of the AccECN TCP Option  . . . . . . . . .  34</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     3.3.  AccECN Compliance Requirements for TCP Proxies, Offload</td><td> </td><td class="right">     3.3.  AccECN Compliance Requirements for TCP Proxies, Offload</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">           Engines and other Middleboxes . . . . . . . . . . . . . .  36</td><td> </td><td class="right">           Engines and other Middleboxes . . . . . . . . . . . . . .  36</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       3.3.1.  Requirements for TCP Proxies  . . . . . . . . . . . .  36</td><td> </td><td class="right">       3.3.1.  Requirements for TCP Proxies  . . . . . . . . . . . .  36</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       3.3.2.  Requirements for Transparent Middleboxes and TCP</td><td> </td><td class="right">       3.3.2.  Requirements for Transparent Middleboxes and TCP</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">               Normalizers . . . . . . . . . . . . . . . . . . . . .  36</td><td> </td><td class="right">               Normalizers . . . . . . . . . . . . . . . . . . . . .  36</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       3.3.3.  Requirements for TCP ACK Filtering  . . . . . . . . .  37</td><td> </td><td class="right">       3.3.3.  Requirements for TCP ACK Filtering  . . . . . . . . .  37</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       3.3.4.  Requirements for TCP Segmentation Offload . . . . . .  38</td><td> </td><td class="right">       3.3.4.  Requirements for TCP Segmentation Offload . . . . . .  38</td><td class="lineno"><br></td></tr>
      <tr id="diff0010"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">                                                                         </span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   4.  Updates to RFC 3168 . . . . . . . . . . . . . . . . . . . . .  39</td><td> </td><td class="right">   4.  Updates to RFC 3168 . . . . . . . . . . . . . . . . . . . . .  39</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   5.  Interaction with TCP Variants . . . . . . . . . . . . . . . .  40</td><td> </td><td class="right">   5.  Interaction with TCP Variants . . . . . . . . . . . . . . . .  40</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     5.1.  Compatibility with SYN Cookies  . . . . . . . . . . . . .  40</td><td> </td><td class="right">     5.1.  Compatibility with SYN Cookies  . . . . . . . . . . . . .  40</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     5.2.  Compatibility with TCP Experiments and Common TCP Options  41</td><td> </td><td class="right">     5.2.  Compatibility with TCP Experiments and Common TCP Options  41</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     5.3.  Compatibility with Feedback Integrity Mechanisms  . . . .  41</td><td> </td><td class="right">     5.3.  Compatibility with Feedback Integrity Mechanisms  . . . .  41</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   6.  Protocol Properties . . . . . . . . . . . . . . . . . . . . .  42</td><td> </td><td class="right">   6.  Protocol Properties . . . . . . . . . . . . . . . . . . . . .  42</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  44</td><td> </td><td class="right">   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  44</td><td class="lineno"><br></td></tr>
      <tr id="diff0011"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   8.  Security Considerations . . . . . . . . . . . . . . . . . . .  4<span class="delete">5</span></td><td> </td><td class="rblock">   8.  Security Considerations . . . . . . . . . . . . . . . . . . .  4<span class="insert">6</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   9.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  47</td><td> </td><td class="right">   9.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  47</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   10. Comments Solicited  . . . . . . . . . . . . . . . . . . . . .  47</td><td> </td><td class="right">   10. Comments Solicited  . . . . . . . . . . . . . . . . . . . . .  47</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   11. References  . . . . . . . . . . . . . . . . . . . . . . . . .  47</td><td> </td><td class="right">   11. References  . . . . . . . . . . . . . . . . . . . . . . . . .  47</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     11.1.  Normative References . . . . . . . . . . . . . . . . . .  47</td><td> </td><td class="right">     11.1.  Normative References . . . . . . . . . . . . . . . . . .  47</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     11.2.  Informative References . . . . . . . . . . . . . . . . .  48</td><td> </td><td class="right">     11.2.  Informative References . . . . . . . . . . . . . . . . .  48</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Appendix A.  Example Algorithms . . . . . . . . . . . . . . . . .  51</td><td> </td><td class="right">   Appendix A.  Example Algorithms . . . . . . . . . . . . . . . . .  51</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     A.1.  Example Algorithm to Encode/Decode the AccECN Option  . .  51</td><td> </td><td class="right">     A.1.  Example Algorithm to Encode/Decode the AccECN Option  . .  51</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">     A.2.  Example Algorithm for Safety Against Long Sequences of</td><td> </td><td class="right">     A.2.  Example Algorithm for Safety Against Long Sequences of</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">           ACK Loss  . . . . . . . . . . . . . . . . . . . . . . . .  52</td><td> </td><td class="right">           ACK Loss  . . . . . . . . . . . . . . . . . . . . . . . .  52</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       A.2.1.  Safety Algorithm without the AccECN Option  . . . . .  52</td><td> </td><td class="right">       A.2.1.  Safety Algorithm without the AccECN Option  . . . . .  52</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-3" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-3"><em> page 12, line 33<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-3"><em> page 12, line 33<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Figure 2: The (post-AccECN) definition of the TCP header flags during</td><td> </td><td class="right">   Figure 2: The (post-AccECN) definition of the TCP header flags during</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">                             the TCP handshake</td><td> </td><td class="right">                             the TCP handshake</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   During the TCP handshake at the start of a connection, to request</td><td> </td><td class="right">   During the TCP handshake at the start of a connection, to request</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   more accurate ECN feedback the TCP client (host A) MUST set the TCP</td><td> </td><td class="right">   more accurate ECN feedback the TCP client (host A) MUST set the TCP</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   flags AE=1, CWR=1 and ECE=1 in the initial SYN segment.</td><td> </td><td class="right">   flags AE=1, CWR=1 and ECE=1 in the initial SYN segment.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   If a TCP server (B) that is AccECN-enabled receives a SYN with the</td><td> </td><td class="right">   If a TCP server (B) that is AccECN-enabled receives a SYN with the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   above three flags set, it MUST set both its half connections into</td><td> </td><td class="right">   above three flags set, it MUST set both its half connections into</td><td class="lineno"><br></td></tr>
      <tr id="diff0012"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   AccECN mode.  Then it MUST set the TCP flags on the SYN/ACK to <span class="delete">one of</span></td><td> </td><td class="rblock">   AccECN mode.  Then it MUST set the <span class="insert">AE, CWR and ECE</span> TCP flags on the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   the <span class="delete">4 values shown</span> in the top block of Table 2 <span class="delete">to confirm</span> that <span class="delete">it</span></td><td> </td><td class="rblock">   SYN/ACK to the <span class="insert">combination</span> in the top block of Table 2 that <span class="insert">feeds</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   supports AccECN.  The TCP server MUST NOT set one of these 4</span></td><td> </td><td class="rblock"><span class="insert">   back the IP-ECN field that arrived</span> on the <span class="insert">SYN.  This applies whether</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   combination of flags</span> on the <span class="delete">SYN/ACK unless</span> the <span class="delete">preceding</span> SYN</td><td> </td><td class="rblock"><span class="insert">   or not</span> the <span class="insert">server itself supports setting the IP-ECN field on a</span> SYN</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   <span class="delete">requested support</span> for <span class="delete">AccECN as above.</span></td><td> </td><td class="rblock">   <span class="insert">or SYN/ACK (see Section 2.5</span> for <span class="insert">rationale).</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0013"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   <span class="delete">A TCP server in AccECN mode MUST set</span> the <span class="delete">AE, CWR and ECE</span> TCP <span class="delete">flags on</span></td><td> </td><td class="rblock">   <span class="insert">When</span> the TCP <span class="insert">server returns any of</span> the <span class="insert">4 combinations</span> in the <span class="insert">top</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   the SYN/ACK to</span> the <span class="delete">value</span> in <span class="delete">Table 2 that feeds back</span> the <span class="delete">IP-ECN field</span></td><td> </td><td class="rblock"><span class="insert">   block of Table 2, it confirms</span> that <span class="insert">it supports AccECN.  The TCP</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   that <span class="delete">arrived</span> on the <span class="delete">SYN.  This applies whether or not the server</span></td><td> </td><td class="rblock"><span class="insert">   server MUST NOT set one of these 4 combination of flags</span> on the <span class="insert">SYN/</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   itself supports setting</span> the <span class="delete">IP-ECN field on a</span> SYN <span class="delete">or SYN/ACK (see</span></td><td> </td><td class="rblock"><span class="insert">   ACK unless</span> the <span class="insert">preceding</span> SYN <span class="insert">requested support</span> for <span class="insert">AccECN as above.</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   Section 2.5</span> for <span class="delete">rationale).</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Once a TCP client (A) has sent the above SYN to declare that it</td><td> </td><td class="right">   Once a TCP client (A) has sent the above SYN to declare that it</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   supports AccECN, and once it has received the above SYN/ACK segment</td><td> </td><td class="right">   supports AccECN, and once it has received the above SYN/ACK segment</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   that confirms that the TCP server supports AccECN, the TCP client</td><td> </td><td class="right">   that confirms that the TCP server supports AccECN, the TCP client</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   MUST set both its half connections into AccECN mode.</td><td> </td><td class="right">   MUST set both its half connections into AccECN mode.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Once in AccECN mode, a TCP client or server has the rights and</td><td> </td><td class="right">   Once in AccECN mode, a TCP client or server has the rights and</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   obligations to participate in the ECN protocol defined in</td><td> </td><td class="right">   obligations to participate in the ECN protocol defined in</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Section 3.1.5.</td><td> </td><td class="right">   Section 3.1.5.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-4" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-4"><em> page 18, line 26<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-4"><em> page 18, line 26<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">3.2.  AccECN Feedback</td><td> </td><td class="right">3.2.  AccECN Feedback</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Each Data Receiver of each half connection maintains four counters,</td><td> </td><td class="right">   Each Data Receiver of each half connection maintains four counters,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   r.cep, r.ceb, r.e0b and r.e1b:</td><td> </td><td class="right">   r.cep, r.ceb, r.e0b and r.e1b:</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   o  The Data Receiver MUST increment the CE packet counter (r.cep),</td><td> </td><td class="right">   o  The Data Receiver MUST increment the CE packet counter (r.cep),</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      for every Acceptable packet that it receives with the CE code</td><td> </td><td class="right">      for every Acceptable packet that it receives with the CE code</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      point in the IP ECN field, including CE marked control packets but</td><td> </td><td class="right">      point in the IP ECN field, including CE marked control packets but</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      excluding CE on SYN packets (SYN=1; ACK=0).</td><td> </td><td class="right">      excluding CE on SYN packets (SYN=1; ACK=0).</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0014"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   o  <span class="delete">The</span> Data Receiver MUST increment the r.ceb, r.e0b or r.e1b byte</td><td> </td><td class="rblock">   o  <span class="insert">A</span> Data Receiver <span class="insert">that supports sending of the AccECN TCP Option</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      counters by the number of TCP payload octets in Acceptable packets</td><td> </td><td class="rblock">      MUST increment the r.ceb, r.e0b or r.e1b byte counters by the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      marked respectively with the CE, ECT(0) and ECT(1) codepoint in</td><td> </td><td class="rblock">      number of TCP payload octets in Acceptable packets marked</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      their <span class="delete">IP-ECN</span> field, including any payload octets on control</td><td> </td><td class="rblock">      respectively with the CE, ECT(0) and ECT(1) codepoint in their <span class="insert">IP-</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      packets, but not including any payload octets on SYN packets</td><td> </td><td class="rblock"><span class="insert">      ECN</span> field, including any payload octets on control packets, but</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      (SYN=1; ACK=0).</td><td> </td><td class="rblock">      not including any payload octets on SYN packets (SYN=1; ACK=0).</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Each Data Sender of each half connection maintains four counters,</td><td> </td><td class="right">   Each Data Sender of each half connection maintains four counters,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   s.cep, s.ceb, s.e0b and s.e1b intended to track the equivalent</td><td> </td><td class="right">   s.cep, s.ceb, s.e0b and s.e1b intended to track the equivalent</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   counters at the Data Receiver.</td><td> </td><td class="right">   counters at the Data Receiver.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   A Data Receiver feeds back the CE packet counter using the Accurate</td><td> </td><td class="right">   A Data Receiver feeds back the CE packet counter using the Accurate</td><td class="lineno"><br></td></tr>
      <tr id="diff0015"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   ECN (ACE) field, as explained in Section 3.2.2.  And it feeds back</td><td> </td><td class="rblock">   ECN (ACE) field, as explained in Section 3.2.2.  And it <span class="insert">optionally</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   all the byte counters using the AccECN TCP Option, as specified in</td><td> </td><td class="rblock">   feeds back all the byte counters using the AccECN TCP Option, as</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   Section 3.2.3.</td><td> </td><td class="rblock">   specified in Section 3.2.3.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Whenever a host feeds back the value of any counter, it MUST report</td><td> </td><td class="right">   Whenever a host feeds back the value of any counter, it MUST report</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   the most recent value, no matter whether it is in a pure ACK, an ACK</td><td> </td><td class="right">   the most recent value, no matter whether it is in a pure ACK, an ACK</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   with new payload data or a retransmission.  Therefore the feedback</td><td> </td><td class="right">   with new payload data or a retransmission.  Therefore the feedback</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   carried on a retransmitted packet is unlikely to be the same as the</td><td> </td><td class="right">   carried on a retransmitted packet is unlikely to be the same as the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   feedback on the original packet.</td><td> </td><td class="right">   feedback on the original packet.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">3.2.1.  Initialization of Feedback Counters</td><td> </td><td class="right">3.2.1.  Initialization of Feedback Counters</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   When a host first enters AccECN mode, in its role as a Data Receiver</td><td> </td><td class="right">   When a host first enters AccECN mode, in its role as a Data Receiver</td><td class="lineno"><br></td></tr>
      <tr id="diff0016"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   it initializes its counters to r.cep = 5, r.e0b = 1 and r.ceb =</td><td> </td><td class="rblock">   it initializes its counters to r.cep = 5, r.e0b = <span class="insert">r.e1b =</span> 1 and r.ceb</td><td class="lineno">!!<br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   <span class="delete">r.e1b.=</span> 0,</td><td> </td><td class="rblock">   = 0,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Non-zero initial values are used to support a stateless handshake</td><td> </td><td class="right">   Non-zero initial values are used to support a stateless handshake</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   (see Section 5.1) and to be distinct from cases where the fields are</td><td> </td><td class="right">   (see Section 5.1) and to be distinct from cases where the fields are</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   incorrectly zeroed (e.g. by middleboxes - see Section 3.2.3.2.4).</td><td> </td><td class="right">   incorrectly zeroed (e.g. by middleboxes - see Section 3.2.3.2.4).</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   When a host enters AccECN mode, in its role as a Data Sender it</td><td> </td><td class="right">   When a host enters AccECN mode, in its role as a Data Sender it</td><td class="lineno"><br></td></tr>
      <tr id="diff0017"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   initializes its counters to s.cep = 5, s.e0b = <span class="delete">1 and s.ceb = s.e1b.</span>=</td><td> </td><td class="rblock">   initializes its counters to s.cep = 5, s.e0b = <span class="insert">s.e1b = 1 and s.ceb </span>=</td><td class="lineno">!!<br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   0.</td><td> </td><td class="right">   0.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">3.2.2.  The ACE Field</td><td> </td><td class="right">3.2.2.  The ACE Field</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   After AccECN has been negotiated on the SYN and SYN/ACK, both hosts</td><td> </td><td class="right">   After AccECN has been negotiated on the SYN and SYN/ACK, both hosts</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   overload the three TCP flags (AE, CWR and ECE) in the main TCP header</td><td> </td><td class="right">   overload the three TCP flags (AE, CWR and ECE) in the main TCP header</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   as one 3-bit field.  Then the field is given a new name, ACE, as</td><td> </td><td class="right">   as one 3-bit field.  Then the field is given a new name, ACE, as</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   shown in Figure 3.</td><td> </td><td class="right">   shown in Figure 3.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">       0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15</td><td> </td><td class="right">       0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-5" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-5"><em> page 22, line 27<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-5"><em> page 22, line 27<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   The encode/decode procedures during the three-way handshake are</td><td> </td><td class="right">   The encode/decode procedures during the three-way handshake are</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   exceptions to the general rules given so far, so they are spelled out</td><td> </td><td class="right">   exceptions to the general rules given so far, so they are spelled out</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   step by step below for clarity:</td><td> </td><td class="right">   step by step below for clarity:</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   o  If a TCP server in AccECN mode receives a CE mark in the IP-ECN</td><td> </td><td class="right">   o  If a TCP server in AccECN mode receives a CE mark in the IP-ECN</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      field of a SYN (SYN=1, ACK=0), it MUST NOT increment r.cep (it</td><td> </td><td class="right">      field of a SYN (SYN=1, ACK=0), it MUST NOT increment r.cep (it</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      remains at its initial value of 5).</td><td> </td><td class="right">      remains at its initial value of 5).</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      Reason: It would be redundant for the server to include CE-marked</td><td> </td><td class="right">      Reason: It would be redundant for the server to include CE-marked</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      SYNs in its r.cep counter, because it already reliably delivers</td><td> </td><td class="right">      SYNs in its r.cep counter, because it already reliably delivers</td><td class="lineno"><br></td></tr>
      <tr id="diff0018"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      feedback of any CE marking <span class="delete">on the SYN/ACK</span> using the encoding in</td><td> </td><td class="rblock">      feedback of any CE marking using the encoding in Table <span class="insert">2 in the</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      Table <span class="delete">2.</span>  This also ensures that, when the server starts using the</td><td> </td><td class="rblock"><span class="insert">      SYN/ACK.</span>  This also ensures that, when the server starts using the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      ACE field, it has not unnecessarily consumed more than one initial</td><td> </td><td class="right">      ACE field, it has not unnecessarily consumed more than one initial</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      value, given they can be used to negotiate variants of the AccECN</td><td> </td><td class="right">      value, given they can be used to negotiate variants of the AccECN</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      protocol (see Appendix B.3).</td><td> </td><td class="right">      protocol (see Appendix B.3).</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   o  If a TCP client in AccECN mode receives CE feedback in the TCP</td><td> </td><td class="right">   o  If a TCP client in AccECN mode receives CE feedback in the TCP</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      flags of a SYN/ACK, it MUST NOT increment s.cep (it remains at its</td><td> </td><td class="right">      flags of a SYN/ACK, it MUST NOT increment s.cep (it remains at its</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      initial value of 5), so that it stays in step with r.cep on the</td><td> </td><td class="right">      initial value of 5), so that it stays in step with r.cep on the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      server.  Nonetheless, the TCP client still triggers the congestion</td><td> </td><td class="right">      server.  Nonetheless, the TCP client still triggers the congestion</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      control actions necessary to respond to the CE feedback.</td><td> </td><td class="right">      control actions necessary to respond to the CE feedback.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-6" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-6"><em> page 24, line 25<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-6"><em> page 24, line 25<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   o  the CE codepoint changes.</td><td> </td><td class="right">   o  the CE codepoint changes.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   RFC 3168 says that a router that changes ECT to not-ECT is invalid</td><td> </td><td class="right">   RFC 3168 says that a router that changes ECT to not-ECT is invalid</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   but safe.  However, from a host's viewpoint, this transition is</td><td> </td><td class="right">   but safe.  However, from a host's viewpoint, this transition is</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   unsafe because it could be the result of two transitions at different</td><td> </td><td class="right">   unsafe because it could be the result of two transitions at different</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   routers on the path: ECT to CE (safe) then CE to not-ECT (unsafe).</td><td> </td><td class="right">   routers on the path: ECT to CE (safe) then CE to not-ECT (unsafe).</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   This scenario could well happen where an ECN-enabled home router</td><td> </td><td class="right">   This scenario could well happen where an ECN-enabled home router</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   congests its upstream mobile broadband bottleneck link, then the</td><td> </td><td class="right">   congests its upstream mobile broadband bottleneck link, then the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   ingress to the mobile network clears the ECN field [Mandalari18].</td><td> </td><td class="right">   ingress to the mobile network clears the ECN field [Mandalari18].</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0019"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   Once a Data Sender has entered AccECN mode it SHOULD check whether</td><td> </td><td class="rblock">   Once a Data Sender has entered AccECN mode it SHOULD check whether <span class="insert">it</span></td><td class="lineno">!!<br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   <span class="delete">all</span> feedback <span class="delete">received</span> for the first three or four rounds <span class="delete">indicated</span></td><td> </td><td class="rblock"><span class="insert">   is receiving continuous CE marking.  Specifying exactly how to do</span></td><td class="lineno">!!<br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   that every packet it sent was CE-marked.</span>  If <span class="delete">so,</span> for the remainder of</td><td> </td><td class="rblock"><span class="insert">   this is beyond the scope of the present specification, but the sender</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   the <span class="delete">connection,</span> the Data Sender SHOULD NOT send ECN-capable <span class="delete">packets,</span></td><td> </td><td class="rblock"><span class="insert">   might check whether the</span> feedback <span class="insert">for every packet it sends</span> for the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   but</span> it MUST continue to feed back any ECN markings on arriving</td><td> </td><td class="rblock">   first three or four rounds <span class="insert">indicates CE-marking.</span>  If <span class="insert">continuous CE-</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   <span class="delete">packets.</span></td><td> </td><td class="rblock"><span class="insert">   marking is detected,</span> for the remainder of the <span class="insert">connection</span> the Data</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">   Sender SHOULD NOT send ECN-capable <span class="insert">packets and consequently it SHOULD</span></td><td class="lineno">!..<br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   NOT respond to any ECN feedback.  The phrase 'MUST NOT' has been</span></td><td class="lineno">!..<br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   avoided to allow the sender to test whether it can resume sending</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   ECN-capable packets.  Throughout, it MUST remain in the AccECN</span></td><td class="lineno">!!<br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   feedback mode and</span> it MUST continue to feed back any ECN markings on</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">   arriving <span class="insert">packets (in its role as Data Receiver).</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0020"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   <span class="delete">The above</span> fall-back behaviours are necessary in case mangling of the</td><td> </td><td class="rblock">   <span class="insert">All the</span> fall-back behaviours <span class="insert">in this section</span> are necessary in case</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   IP/ECN field is asymmetric, which is currently common over some</td><td> </td><td class="rblock">   mangling of the IP/ECN field is asymmetric, which is currently common</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   mobile networks [Mandalari18].  Then one end might see no unsafe</td><td> </td><td class="rblock">   over some mobile networks [Mandalari18].  Then one end might see no</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   transition and continue sending ECN-capable packets, while the other</td><td> </td><td class="rblock">   unsafe transition and continue sending ECN-capable packets, while the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   end sees an unsafe transition and stops sending ECN-capable packets.</td><td> </td><td class="rblock">   other end sees an unsafe transition and stops sending ECN-capable</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">   packets.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">3.2.2.4.  Testing for Zeroing of the ACE Field</td><td> </td><td class="right">3.2.2.4.  Testing for Zeroing of the ACE Field</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Section 3.2.2 required the Data Receiver to initialize the r.cep</td><td> </td><td class="right">   Section 3.2.2 required the Data Receiver to initialize the r.cep</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   counter to a non-zero value.  Therefore, in either direction the</td><td> </td><td class="right">   counter to a non-zero value.  Therefore, in either direction the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   initial value of the ACE counter ought to be non-zero.</td><td> </td><td class="right">   initial value of the ACE counter ought to be non-zero.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   If AccECN has been successfully negotiated, the Data Sender SHOULD</td><td> </td><td class="right">   If AccECN has been successfully negotiated, the Data Sender SHOULD</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   check the value of the ACE counter in the first packet (with or</td><td> </td><td class="right">   check the value of the ACE counter in the first packet (with or</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   without data) that arrives with SYN=0.  If the value of this ACE</td><td> </td><td class="right">   without data) that arrives with SYN=0.  If the value of this ACE</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-7" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-7"><em> page 26, line 7<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-7"><em> page 26, line 15<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      Even though this rule is stated as a "SHOULD", it is important for</td><td> </td><td class="right">      Even though this rule is stated as a "SHOULD", it is important for</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      a transition to trigger an ACK if at all possible, The only valid</td><td> </td><td class="right">      a transition to trigger an ACK if at all possible, The only valid</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      exception to this rule is given below these bullets.</td><td> </td><td class="right">      exception to this rule is given below these bullets.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      For the avoidance of doubt, this rule is deliberately worded to</td><td> </td><td class="right">      For the avoidance of doubt, this rule is deliberately worded to</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      apply solely when _data_ packets arrive, but the comparison with</td><td> </td><td class="right">      apply solely when _data_ packets arrive, but the comparison with</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      the previous packet includes any packet, not just data packets.</td><td> </td><td class="right">      the previous packet includes any packet, not just data packets.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Increment-Triggered ACKs:  An AccECN Data Receiver MUST emit an ACK</td><td> </td><td class="right">   Increment-Triggered ACKs:  An AccECN Data Receiver MUST emit an ACK</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      if 'n' CE marks have arrived since the previous ACK.  If there is</td><td> </td><td class="right">      if 'n' CE marks have arrived since the previous ACK.  If there is</td><td class="lineno"><br></td></tr>
      <tr id="diff0021"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      <span class="delete">new</span> data to acknowledge, 'n' SHOULD be 2.  If there is no <span class="delete">new</span> data</td><td> </td><td class="rblock">      <span class="insert">newly delivered</span> data to acknowledge, 'n' SHOULD be 2.  If there is</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      to acknowledge, 'n' SHOULD be 3 and MUST be no less than 3.  In</td><td> </td><td class="rblock">      no <span class="insert">newly delivered</span> data to acknowledge, 'n' SHOULD be 3 and MUST</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      either case, 'n' MUST be no greater than <span class="delete">6.</span></td><td> </td><td class="rblock">      be no less than 3.  In either case, 'n' MUST be no greater than <span class="insert">7.</span></td><td class="lineno">!!<br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   The above rules for when to send an ACK are designed to be</td><td> </td><td class="right">   The above rules for when to send an ACK are designed to be</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   complemented by those in Section 3.2.3.3, which concern whether the</td><td> </td><td class="right">   complemented by those in Section 3.2.3.3, which concern whether the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   AccECN TCP Option ought to be included on ACKs.</td><td> </td><td class="right">   AccECN TCP Option ought to be included on ACKs.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   If the arrivals of a number of data packets are all processed as one</td><td> </td><td class="right">   If the arrivals of a number of data packets are all processed as one</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   event, e.g. using large receive offload (LRO) or generic receive</td><td> </td><td class="right">   event, e.g. using large receive offload (LRO) or generic receive</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   offload (GRO), both the above rules SHOULD be interpreted as</td><td> </td><td class="right">   offload (GRO), both the above rules SHOULD be interpreted as</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   requiring multiple ACKs to be emitted back-to-back (for each</td><td> </td><td class="right">   requiring multiple ACKs to be emitted back-to-back (for each</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   transition and for each repetition by 'n' CE marks).  If this is</td><td> </td><td class="right">   transition and for each repetition by 'n' CE marks).  If this is</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-8" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-8"><em> page 26, line 42<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-8"><em> page 26, line 50<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   infrequent, as is the case for most AQMs at the time of writing, or</td><td> </td><td class="right">   infrequent, as is the case for most AQMs at the time of writing, or</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   there are multiple marks in a row, the additional load will be low.</td><td> </td><td class="right">   there are multiple marks in a row, the additional load will be low.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   However, marking patterns with numerous non-contiguous CE marks could</td><td> </td><td class="right">   However, marking patterns with numerous non-contiguous CE marks could</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   increase the load significantly.  One possible compromise would be</td><td> </td><td class="right">   increase the load significantly.  One possible compromise would be</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   for the receiver to heuristically detect whether the sender is in</td><td> </td><td class="right">   for the receiver to heuristically detect whether the sender is in</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   slow-start, then to implement change-triggered ACKs while the sender</td><td> </td><td class="right">   slow-start, then to implement change-triggered ACKs while the sender</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   is in slow-start, and offload otherwise.</td><td> </td><td class="right">   is in slow-start, and offload otherwise.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   With ECN-capable pure ACKs [I-D.ietf-tcpm-generalized-ecn], the</td><td> </td><td class="right">   With ECN-capable pure ACKs [I-D.ietf-tcpm-generalized-ecn], the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   'Increment-Triggered ACKs' rule could cause ECN-marked pure ACKs to</td><td> </td><td class="right">   'Increment-Triggered ACKs' rule could cause ECN-marked pure ACKs to</td><td class="lineno"><br></td></tr>
      <tr id="diff0022"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   trigger further ACKs.  Although TCP normally only ACKs <span class="delete">new</span> data, in</td><td> </td><td class="rblock">   trigger further ACKs.  Although TCP normally only ACKs <span class="insert">newly</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   this case the ACKs of ACKs would feed back new congestion state.  The</td><td> </td><td class="rblock"><span class="insert">   delivered</span> data, in this case the ACKs of ACKs would feed back new</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   minimum of 3 for 'n' in this case ensures that, even if there is</td><td> </td><td class="rblock">   congestion state.  The minimum of 3 for 'n' in this case ensures</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   pathological congestion in both directions, any resulting ping-pong</td><td> </td><td class="rblock">   that, even if there is pathological congestion in both directions,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   of ACKs will be rapidly damped.</td><td> </td><td class="rblock">   any resulting ping-pong of ACKs will be rapidly damped.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   These ACKs of ACKs could be misidentified as duplicate ACKs in</td><td> </td><td class="right">   These ACKs of ACKs could be misidentified as duplicate ACKs in</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   certain circumstances described below.  Therefore, a host in AccECN</td><td> </td><td class="right">   certain circumstances described below.  Therefore, a host in AccECN</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   mode that is sending ECN-capable pure ACKs SHOULD add one of the</td><td> </td><td class="right">   mode that is sending ECN-capable pure ACKs SHOULD add one of the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   following additional checks when it tests whether an incoming pure</td><td> </td><td class="right">   following additional checks when it tests whether an incoming pure</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   ACK is a duplicate:</td><td> </td><td class="right">   ACK is a duplicate:</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   o  If SACK has been negotatiated for the connection, but there is no</td><td> </td><td class="right">   o  If SACK has been negotatiated for the connection, but there is no</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      SACK option on the incoming pure ACK, it is not a duplicate;</td><td> </td><td class="right">      SACK option on the incoming pure ACK, it is not a duplicate;</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-9" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-9"><em> page 29, line 16<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-9"><em> page 29, line 21<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">             +--------+------------------+------------------+</td><td> </td><td class="right">             +--------+------------------+------------------+</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">             | Length | Type 0           | Type 1           |</td><td> </td><td class="right">             | Length | Type 0           | Type 1           |</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">             +--------+------------------+------------------+</td><td> </td><td class="right">             +--------+------------------+------------------+</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">             | 11     | EE0B, ECEB, EE1B | EE1B, ECEB, EE0B |</td><td> </td><td class="right">             | 11     | EE0B, ECEB, EE1B | EE1B, ECEB, EE0B |</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">             | 8      | EE0B, ECEB       | EE1B, ECEB       |</td><td> </td><td class="right">             | 8      | EE0B, ECEB       | EE1B, ECEB       |</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">             | 5      | EE0B             | EE1B             |</td><td> </td><td class="right">             | 5      | EE0B             | EE1B             |</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">             | 2      | (empty)          | (empty)          |</td><td> </td><td class="right">             | 2      | (empty)          | (empty)          |</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">             +--------+------------------+------------------+</td><td> </td><td class="right">             +--------+------------------+------------------+</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0023"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">       <span class="insert">Fields included in AccECN TCP Options of each length and type</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   The empty option of Length=2 is provided to allow for a case where an</td><td> </td><td class="right">   The empty option of Length=2 is provided to allow for a case where an</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   AccECN Option has to be sent (e.g. on the SYN/ACK to test the path),</td><td> </td><td class="right">   AccECN Option has to be sent (e.g. on the SYN/ACK to test the path),</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   but there is very limited space for the option.</td><td> </td><td class="right">   but there is very limited space for the option.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   All implementations of a Data Sender that read any AccECN Option MUST</td><td> </td><td class="right">   All implementations of a Data Sender that read any AccECN Option MUST</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   be able to read in AccECN Options of any of the above lengths.  For</td><td> </td><td class="right">   be able to read in AccECN Options of any of the above lengths.  For</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   forward compatibility, if the AccECN Option is of any other length,</td><td> </td><td class="right">   forward compatibility, if the AccECN Option is of any other length,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   implementations MUST use those whole 3-octet fields that fit within</td><td> </td><td class="right">   implementations MUST use those whole 3-octet fields that fit within</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   the length and ignore the remainder of the option, treating it as</td><td> </td><td class="right">   the length and ignore the remainder of the option, treating it as</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   padding.</td><td> </td><td class="right">   padding.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-10" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-10"><em> page 31, line 30<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-10"><em> page 31, line 32<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   congestion).  However, other fall-back strategies will need to follow</td><td> </td><td class="right">   congestion).  However, other fall-back strategies will need to follow</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   all the rules in Section 3.1.5, which concern behaviour when SYNs or</td><td> </td><td class="right">   all the rules in Section 3.1.5, which concern behaviour when SYNs or</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   SYN/ACKs negotiating different types of feedback have been sent</td><td> </td><td class="right">   SYN/ACKs negotiating different types of feedback have been sent</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   within the same connection.</td><td> </td><td class="right">   within the same connection.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   If the TCP client detects that the first data segment it sent with</td><td> </td><td class="right">   If the TCP client detects that the first data segment it sent with</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   the AccECN Option was lost, it SHOULD fall back to no AccECN Option</td><td> </td><td class="right">   the AccECN Option was lost, it SHOULD fall back to no AccECN Option</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   on the retransmission.  Again, implementers MAY use other fall-back</td><td> </td><td class="right">   on the retransmission.  Again, implementers MAY use other fall-back</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   strategies such as attempting to retransmit a second segment with the</td><td> </td><td class="right">   strategies such as attempting to retransmit a second segment with the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   AccECN Option before fall-back, and/or caching whether the AccECN</td><td> </td><td class="right">   AccECN Option before fall-back, and/or caching whether the AccECN</td><td class="lineno"><br></td></tr>
      <tr id="diff0024"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   Option is blocked for subsequent connections.</td><td> </td><td class="rblock">   Option is blocked for subsequent connections.  <span class="insert">[RFC9040]</span> further</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   <span class="delete">[I-D.ietf-tcpm-2140bis]</span> further discusses caching of TCP parameters</td><td> </td><td class="rblock">   discusses caching of TCP parameters and status information.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   and status information.</td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   If a host falls back to not sending the AccECN Option, it will</td><td> </td><td class="right">   If a host falls back to not sending the AccECN Option, it will</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   continue to process any incoming AccECN Options as normal.</td><td> </td><td class="right">   continue to process any incoming AccECN Options as normal.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Either host MAY include the AccECN Option in a subsequent segment to</td><td> </td><td class="right">   Either host MAY include the AccECN Option in a subsequent segment to</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   retest whether the AccECN Option can traverse the path.</td><td> </td><td class="right">   retest whether the AccECN Option can traverse the path.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   If the TCP server receives a second SYN with a request for AccECN</td><td> </td><td class="right">   If the TCP server receives a second SYN with a request for AccECN</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   support, it should resend the SYN/ACK, again confirming its support</td><td> </td><td class="right">   support, it should resend the SYN/ACK, again confirming its support</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   for AccECN, but this time without the AccECN Option.  This approach</td><td> </td><td class="right">   for AccECN, but this time without the AccECN Option.  This approach</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-11" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-11"><em> page 32, line 41<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-11"><em> page 32, line 44<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   the connection, this clearly indicates that the AccECN Option is not</td><td> </td><td class="right">   the connection, this clearly indicates that the AccECN Option is not</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   blocked on the respective path, and the AccECN endpoint MAY switch</td><td> </td><td class="right">   blocked on the respective path, and the AccECN endpoint MAY switch</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   out of the mode that assumes the AccECN Option is not available for</td><td> </td><td class="right">   out of the mode that assumes the AccECN Option is not available for</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   this half connection.</td><td> </td><td class="right">   this half connection.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">3.2.3.2.4.  Test for Zeroing of the AccECN Option</td><td> </td><td class="right">3.2.3.2.4.  Test for Zeroing of the AccECN Option</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   For a related test for invalid initialization of the ACE field, see</td><td> </td><td class="right">   For a related test for invalid initialization of the ACE field, see</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Section 3.2.2.4</td><td> </td><td class="right">   Section 3.2.2.4</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0025"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   Section <span class="delete">3.2</span> required the Data Receiver to initialize the r.e0b</td><td> </td><td class="rblock">   Section <span class="insert">3.2.1</span> required the Data Receiver to initialize the r.e0b <span class="insert">and</span></td><td class="lineno">!!<br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   <span class="delete">counter</span> to a non-zero value.  Therefore, in either direction the</td><td> </td><td class="rblock"><span class="insert">   r.e1b counters</span> to a non-zero value.  Therefore, in either direction</td><td class="lineno">!!<br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   initial value of the EE0B field in the AccECN Option (if one exists)</td><td> </td><td class="rblock">   the initial value of the EE0B <span class="insert">field or EE1B</span> field in the AccECN</td><td class="lineno">!!<br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   ought to be non-zero.  If AccECN has been negotiated:</td><td> </td><td class="rblock">   Option (if one exists) ought to be non-zero.  If AccECN has been</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">   negotiated:</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0026"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   o  the TCP server MAY check the initial value of the EE0B field in</td><td> </td><td class="rblock">   o  the TCP server MAY check <span class="insert">that</span> the initial value of the EE0B field</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      the first segment that acknowledges sequence space that at least</td><td> </td><td class="rblock">      <span class="insert">or the EE1B field is non-zero</span> in the first segment that</td><td class="lineno">!!<br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      covers the ISN plus 1.  <span class="delete">If the initial value of the EE0B field is</span></td><td> </td><td class="rblock">      acknowledges sequence space that at least covers the ISN plus 1.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">      zero, the server will switch into a mode that ignores the AccECN</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">      Option for this half connection.</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0027"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   o  the TCP client MAY check the initial value of the EE0B field on</td><td> </td><td class="rblock">      <span class="insert">If it runs a test and either initial value is zero, the server</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      the SYN/ACK.  If <span class="delete">the</span> initial value <span class="delete">of the EE0B field</span> is zero, the</td><td> </td><td class="rblock"><span class="insert">      will switch into a mode that ignores the AccECN Option for this</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      client will switch into a mode that ignores the AccECN Option for</td><td> </td><td class="rblock"><span class="insert">      half connection.</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      this half connection.</td><td> </td><td class="rblock">                                                                         </td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">   o  the TCP client MAY check the initial value of the EE0B field <span class="insert">or</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">      the EE1B field is non-zero</span> on the SYN/ACK.  If <span class="insert">it runs a test and</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">      either</span> initial value is zero, the client will switch into a mode</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">      that ignores the AccECN Option for this half connection.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   While a host is in the mode that ignores the AccECN Option it MUST</td><td> </td><td class="right">   While a host is in the mode that ignores the AccECN Option it MUST</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   adopt the conservative interpretation of the ACE field discussed in</td><td> </td><td class="right">   adopt the conservative interpretation of the ACE field discussed in</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Section 3.2.2.5.</td><td> </td><td class="right">   Section 3.2.2.5.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Note that the Data Sender MUST NOT test whether the arriving byte</td><td> </td><td class="right">   Note that the Data Sender MUST NOT test whether the arriving byte</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   counters in the initial AccECN Option have been initialized to</td><td> </td><td class="right">   counters in the initial AccECN Option have been initialized to</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   specific valid values - the above checks solely test whether these</td><td> </td><td class="right">   specific valid values - the above checks solely test whether these</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   fields have been incorrectly zeroed.  This allows hosts to use</td><td> </td><td class="right">   fields have been incorrectly zeroed.  This allows hosts to use</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   different initial values as an additional signalling channel in</td><td> </td><td class="right">   different initial values as an additional signalling channel in</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-12" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-12"><em> page 33, line 47<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-12"><em> page 33, line 51<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   situation is out of scope, and needs to be dealt with in a</td><td> </td><td class="right">   situation is out of scope, and needs to be dealt with in a</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   specification that uses ECN-capable control packets.  Theoretically,</td><td> </td><td class="right">   specification that uses ECN-capable control packets.  Theoretically,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   this situation could also occur if a middlebox mangled the AccECN</td><td> </td><td class="right">   this situation could also occur if a middlebox mangled the AccECN</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Option but not the ACE field.  However, the Data Sender has to assume</td><td> </td><td class="right">   Option but not the ACE field.  However, the Data Sender has to assume</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   that the integrity of the AccECN Option is sound, based on the above</td><td> </td><td class="right">   that the integrity of the AccECN Option is sound, based on the above</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   test of the well-known initial values and optionally other integrity</td><td> </td><td class="right">   test of the well-known initial values and optionally other integrity</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   tests (Section 5.3).</td><td> </td><td class="right">   tests (Section 5.3).</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   If either end-point detects that the s.ceb counter has increased but</td><td> </td><td class="right">   If either end-point detects that the s.ceb counter has increased but</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   the s.cep has not (and by testing ACK coverage it is certain how much</td><td> </td><td class="right">   the s.cep has not (and by testing ACK coverage it is certain how much</td><td class="lineno"><br></td></tr>
      <tr id="diff0028"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   the ACE field has wrapped), and if there is no <span class="delete">other explanation that</span></td><td> </td><td class="rblock">   the ACE field has wrapped), and if there is no <span class="insert">explanation other than</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   an invalid protocol transition due to some form of feedback mangling,</td><td> </td><td class="right">   an invalid protocol transition due to some form of feedback mangling,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   the Data Sender MUST disable sending ECN-capable packets for the</td><td> </td><td class="right">   the Data Sender MUST disable sending ECN-capable packets for the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   remainder of the half-connection by setting the IP/ECN field in all</td><td> </td><td class="right">   remainder of the half-connection by setting the IP/ECN field in all</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   subsequent packets to Not-ECT.</td><td> </td><td class="right">   subsequent packets to Not-ECT.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">3.2.3.3.  Usage of the AccECN TCP Option</td><td> </td><td class="right">3.2.3.3.  Usage of the AccECN TCP Option</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   If a Data Receiver in AccECN mode intends to use the AccECN TCP</td><td> </td><td class="right">   If a Data Receiver in AccECN mode intends to use the AccECN TCP</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Option to provide feedback, the rules below determine when it</td><td> </td><td class="right">   Option to provide feedback, the rules below determine when it</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   includes an AccECN TCP Option, and which fields to include, given</td><td> </td><td class="right">   includes an AccECN TCP Option, and which fields to include, given</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   other options might be competing for limited option space:</td><td> </td><td class="right">   other options might be competing for limited option space:</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Importance of Congestion Control:  AccECN is for congestion control,</td><td> </td><td class="right">   Importance of Congestion Control:  AccECN is for congestion control,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      which SHOULD generally be considered important relative to other</td><td> </td><td class="right">      which SHOULD generally be considered important relative to other</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      TCP options.</td><td> </td><td class="right">      TCP options.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0029"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      If the smallest recommended AccECN Option would leave insufficient</td><td> </td><td class="rblock">      If <span class="insert">SACK has been negotiated, and</span> the smallest recommended AccECN</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      space for two SACK blocks on a particular ACK, the Data Receiver</td><td> </td><td class="rblock">      Option would leave insufficient space for two SACK blocks on a</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      MUST give precedence to the SACK option (total 18 octets), because</td><td> </td><td class="rblock">      particular ACK, the Data Receiver MUST give precedence to the SACK</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      loss feedback is more critical.</td><td> </td><td class="rblock">      option (total 18 octets), because loss feedback is more critical.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Recommended Simple Scheme:  The Data Receiver SHOULD include an</td><td> </td><td class="right">   Recommended Simple Scheme:  The Data Receiver SHOULD include an</td><td class="lineno"><br></td></tr>
      <tr id="diff0030"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      AccECN TCP Option on every scheduled ACK <span class="delete">that acknowledges new</span></td><td> </td><td class="rblock">      AccECN TCP Option on every scheduled ACK <span class="insert">if any byte counter has</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">      data.</span>  Whenever possible, it SHOULD include a field for every byte</td><td> </td><td class="rblock"><span class="insert">      incremented since the last ACK.</span>  Whenever possible, it SHOULD</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      counter that has changed at some time during the connection (see</td><td> </td><td class="rblock">      include a field for every byte counter that has changed at some</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">      examples later).</td><td> </td><td class="rblock">      time during the connection (see examples later).</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      A scheduled ACK means an ACK that the Data Receiver would send by</td><td> </td><td class="right">      A scheduled ACK means an ACK that the Data Receiver would send by</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      its regular delayed ACK rules.  Recall that Section 1.3 defines an</td><td> </td><td class="right">      its regular delayed ACK rules.  Recall that Section 1.3 defines an</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      'ACK' as either with data payload or without.  But the above rule</td><td> </td><td class="right">      'ACK' as either with data payload or without.  But the above rule</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      is worded so that, in the common case when most of the data is</td><td> </td><td class="right">      is worded so that, in the common case when most of the data is</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      from a server to a client, the server only includes an AccECN TCP</td><td> </td><td class="right">      from a server to a client, the server only includes an AccECN TCP</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      Option while it is acknowledging data from the client.</td><td> </td><td class="right">      Option while it is acknowledging data from the client.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   When available TCP option space is limited on particular packets, the</td><td> </td><td class="right">   When available TCP option space is limited on particular packets, the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   recommended scheme will need to include compromises.  To guide the</td><td> </td><td class="right">   recommended scheme will need to include compromises.  To guide the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-13" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-13"><em> page 37, line 4<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-13"><em> page 37, line 8<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   length value matches one of those specified in Section 3.2.3, and</td><td> </td><td class="right">   length value matches one of those specified in Section 3.2.3, and</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   whether or not the initial values of the byte-counter fields match</td><td> </td><td class="right">   whether or not the initial values of the byte-counter fields match</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   those in Section 3.2.1.  This is because blocking apparently invalid</td><td> </td><td class="right">   those in Section 3.2.1.  This is because blocking apparently invalid</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   values prevents the standardized set of values being extended in</td><td> </td><td class="right">   values prevents the standardized set of values being extended in</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   future (given outdated normalizers would block updated hosts from</td><td> </td><td class="right">   future (given outdated normalizers would block updated hosts from</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   using the extended AccECN standard).</td><td> </td><td class="right">   using the extended AccECN standard).</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   A TCP normalizer is likely to block or alter an AccECN TCP Option if</td><td> </td><td class="right">   A TCP normalizer is likely to block or alter an AccECN TCP Option if</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   the length value or the initial values of its byte-counter fields do</td><td> </td><td class="right">   the length value or the initial values of its byte-counter fields do</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   not match one of those specified in Section 3.2.3 or Section 3.2.1.</td><td> </td><td class="right">   not match one of those specified in Section 3.2.3 or Section 3.2.1.</td><td class="lineno"><br></td></tr>
      <tr id="diff0031"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">                                                                         </span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   However, to comply with the present AccECN specification, a middlebox</td><td> </td><td class="right">   However, to comply with the present AccECN specification, a middlebox</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   MUST NOT change the ACE field; or those fields of the AccECN Option</td><td> </td><td class="right">   MUST NOT change the ACE field; or those fields of the AccECN Option</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   that are currently specified in Section 3.2.3; or any AccECN field</td><td> </td><td class="right">   that are currently specified in Section 3.2.3; or any AccECN field</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   covered by integrity protection (e.g. [RFC5925]).</td><td> </td><td class="right">   covered by integrity protection (e.g. [RFC5925]).</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">3.3.3.  Requirements for TCP ACK Filtering</td><td> </td><td class="right">3.3.3.  Requirements for TCP ACK Filtering</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   A node that implements ACK filtering (aka. thinning or coalescing)</td><td> </td><td class="right">   A node that implements ACK filtering (aka. thinning or coalescing)</td><td class="lineno"><br></td></tr>
      <tr id="diff0032"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   <span class="delete">and itself also implements ECN marking will not need to filter ACKs</span></td><td> </td><td class="rblock">   SHOULD <span class="insert">determine if an ACK is part of a connection</span> using AccECN and</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   from connections that use AccECN feedback.  Therefore, such a node</span></td><td> </td><td class="rblock">   SHOULD <span class="insert">then preserve</span> the <span class="insert">correct operation</span> of <span class="insert">AccECN feedback.  The</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   SHOULD <span class="delete">detect connections that are</span> using AccECN <span class="delete">feedback</span> and <span class="delete">it</span></td><td> </td><td class="rblock"><span class="insert">   following notes might help with each part of this requirement:</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   SHOULD <span class="delete">refrain from filtering</span> the <span class="delete">ACKs</span> of <span class="delete">such connections (if it</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   coalesced ACKs it would not be AccECN-compliant, but the requirement</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   is stated as a "SHOULD" in order to allow leeway for pre-existing ACK</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   filtering functions to be brought into line).</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0033"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   <span class="delete">A node that implements</span> ACK <span class="delete">filtering</span> and <span class="delete">does not itself implement</span></td><td> </td><td class="rblock">   <span class="insert">o  To determine whether a pure TCP</span> ACK <span class="insert">is part of an AccECN</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   ECN marking does not need</span> to <span class="delete">treat AccECN connections any differently</span></td><td> </td><td class="rblock"><span class="insert">      connection without resorting to connection tracking</span> and <span class="insert">per-flow</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   from other TCP connections.  Nonetheless, it is RECOMMENDED that such</span></td><td> </td><td class="rblock"><span class="insert">      state, a useful heuristic would be</span> to <span class="insert">check for a non-zero</span> ECN</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   nodes implement</span> ECN <span class="delete">marking and comply with</span> the <span class="delete">requirements of</span> the</td><td> </td><td class="rblock">      <span class="insert">field at</span> the <span class="insert">IP layer (because</span> the <span class="insert">ECN++ experiment only allows</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   <span class="delete">previous paragraph.  This should</span> be <span class="delete">a better way than ACK filtering</span></td><td> </td><td class="rblock"><span class="insert">      TCP pure ACKs to</span> be <span class="insert">ECN-capable if AccECN has been negotiated</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   to <span class="delete">improve the performance of</span> AccECN TCP <span class="delete">connections.</span></td><td> </td><td class="rblock"><span class="insert">      [I-D.ietf-tcpm-generalized-ecn]).  This heuristic is simple and</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">      stateless.  However, it might omit some AccECN ACKs, because it is</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">      only recommended but not obligatory</span> to <span class="insert">use ECN++ with</span> AccECN <span class="insert">-</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">      only deployment experience will tell.  Also,</span> TCP <span class="insert">ACKs might be</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">      ECN-capable owing to some scheme other than AccECN, e.g. [RFC5690]</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">      or some future standards action.  Again, only deployment</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">      experience will tell.</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0034"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   The <span class="delete">rationale for these requirements is that</span> AccECN <span class="delete">feedback provides</span></td><td> </td><td class="rblock">   <span class="insert">o</span>  The <span class="insert">main concern with preserving correct</span> AccECN <span class="insert">operation involves</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   sufficient information to a Data Receiver for it to be able to</span></td><td> </td><td class="rblock"><span class="insert">      leaving enough</span> ACKs <span class="insert">for</span> the <span class="insert">data sender</span> to <span class="insert">work out whether the</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   monitor ECN marking of the</span> ACKs <span class="delete">it has sent, so that it can thin the</span></td><td> </td><td class="rblock"><span class="insert">      3-bit ACE field has wrapped.  ACE field wrap is of less concern if</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   ACK stream itself.  This could eventually mean that ACK filtering in</span></td><td> </td><td class="rblock"><span class="insert">      packets</span> also <span class="insert">carry</span> the <span class="insert">AccECN</span> TCP <span class="insert">Option.</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   the <span class="delete">network gives no performance advantage.  Then TCP will be able</span> to</td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   <span class="delete">maintain its own control over ACK coalescing.  This will</span> also <span class="delete">allow</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   the TCP <span class="delete">Data Sender to use the timing of ACK arrivals to more</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   reliably infer further information about the path congestion level.</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0035"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   Note that the specification of AccECN in TCP does not presume to rely</td><td> </td><td class="rblock">   Note that the <span class="insert">present</span> specification of AccECN in TCP does not presume</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   on any of the above ACK filtering behaviour in the <span class="delete">network,</span> because</td><td> </td><td class="rblock">   to rely on any of the above ACK filtering behaviour in the <span class="insert">network</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   it has to be robust against pre-existing network nodes that <span class="delete">still</span></td><td> </td><td class="rblock"><span class="insert">   (hence the use of 'SHOULD' rather than 'MUST' above),</span> because it has</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   filter</span> AccECN ACKs, and robust against ACK loss during <span class="delete">overload.</span></td><td> </td><td class="rblock">   to be robust against pre-existing network nodes that <span class="insert">do not</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   distinguish</span> AccECN ACKs, and robust against ACK loss during <span class="insert">overload</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">   more generally.</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0036"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   Section 5.2.1 of [RFC3449] gives best current practice on ACK</td><td> </td><td class="rblock">   Section 5.2.1 of <span class="insert">BCP 69</span> [RFC3449] gives best current practice on <span class="insert">pure</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   <span class="delete">filtering (aka. thinning or coalescing).</span>  It gives no advice on ACKs</td><td> </td><td class="rblock"><span class="insert">   TCP</span> ACK <span class="insert">filtering.</span>  It gives no advice on ACKs carrying ECN <span class="insert">feedback,</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   carrying ECN <span class="delete">feedback (other</span> than that filtering ought to preserve</td><td> </td><td class="rblock"><span class="insert">   other</span> than that filtering ought to preserve the correct operation of</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   the correct operation of ECN <span class="delete">feedback),</span> because at the time <span class="delete">is</span> said</td><td> </td><td class="rblock">   ECN <span class="insert">feedback,</span> because at the time <span class="insert">it</span> said that <span class="insert">"SACK and ECN</span> remain</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   that <span class="delete">"ECN</span> remain areas of ongoing research".  This section updates</td><td> </td><td class="rblock">   areas of ongoing research".  This section updates that <span class="insert">best current</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   that <span class="delete">advice</span> for a TCP connection that supports AccECN feedback.</td><td> </td><td class="rblock"><span class="insert">   practice</span> for a TCP connection that supports AccECN feedback.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">3.3.4.  Requirements for TCP Segmentation Offload</td><td> </td><td class="right">3.3.4.  Requirements for TCP Segmentation Offload</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Hardware to offload certain TCP processing represents another large</td><td> </td><td class="right">   Hardware to offload certain TCP processing represents another large</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   class of middleboxes (even though it is often a function of a host's</td><td> </td><td class="right">   class of middleboxes (even though it is often a function of a host's</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   network interface and rarely in its own 'box').</td><td> </td><td class="right">   network interface and rarely in its own 'box').</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   The ACE field changes with every received CE marking, so today's</td><td> </td><td class="right">   The ACE field changes with every received CE marking, so today's</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   receive offloading could lead to many interrupts in high congestion</td><td> </td><td class="right">   receive offloading could lead to many interrupts in high congestion</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   situations.  Although that would be useful (because congestion</td><td> </td><td class="right">   situations.  Although that would be useful (because congestion</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-14" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-14"><em> page 45, line 11<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-14"><em> page 45, line 11<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   protocol.  This bit was previously called the Nonce Sum (NS) flag</td><td> </td><td class="right">   protocol.  This bit was previously called the Nonce Sum (NS) flag</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [RFC3540], but RFC 3540 has been reclassified as historic [RFC8311].</td><td> </td><td class="right">   [RFC3540], but RFC 3540 has been reclassified as historic [RFC8311].</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   The flag will now be defined as:</td><td> </td><td class="right">   The flag will now be defined as:</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">                  +-----+-------------------+-----------+</td><td> </td><td class="right">                  +-----+-------------------+-----------+</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">                  | Bit | Name              | Reference |</td><td> </td><td class="right">                  | Bit | Name              | Reference |</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">                  +-----+-------------------+-----------+</td><td> </td><td class="right">                  +-----+-------------------+-----------+</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">                  | 7   | AE (Accurate ECN) | RFC XXXX  |</td><td> </td><td class="right">                  | 7   | AE (Accurate ECN) | RFC XXXX  |</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">                  +-----+-------------------+-----------+</td><td> </td><td class="right">                  +-----+-------------------+-----------+</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0037"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">                       <span class="insert">TCP header flag reassignment</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [TO BE REMOVED: IANA is requested to update the existing entry in the</td><td> </td><td class="right">   [TO BE REMOVED: IANA is requested to update the existing entry in the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Transmission Control Protocol (TCP) Header Flags registration</td><td> </td><td class="right">   Transmission Control Protocol (TCP) Header Flags registration</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   (https://www.iana.org/assignments/tcp-header-flags/tcp-header-</td><td> </td><td class="right">   (https://www.iana.org/assignments/tcp-header-flags/tcp-header-</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   flags.xhtml#tcp-header-flags-1) for Bit 7 to "AE (Accurate ECN),</td><td> </td><td class="right">   flags.xhtml#tcp-header-flags-1) for Bit 7 to "AE (Accurate ECN),</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   previously used as NS (Nonce Sum) by [RFC3540], which is now Historic</td><td> </td><td class="right">   previously used as NS (Nonce Sum) by [RFC3540], which is now Historic</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [RFC8311]" and change the reference to this RFC-to-be instead of</td><td> </td><td class="right">   [RFC8311]" and change the reference to this RFC-to-be instead of</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   RFC8311.]</td><td> </td><td class="right">   RFC8311.]</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   This document also defines two new TCP options for AccECN, assigned</td><td> </td><td class="right">   This document also defines two new TCP options for AccECN, assigned</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   values of TBD0 and TBD1 (decimal) from the TCP option space.  These</td><td> </td><td class="right">   values of TBD0 and TBD1 (decimal) from the TCP option space.  These</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   values are defined as:</td><td> </td><td class="right">   values are defined as:</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      +------+--------+--------------------------------+-----------+</td><td> </td><td class="right">      +------+--------+--------------------------------+-----------+</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      | Kind | Length | Meaning                        | Reference |</td><td> </td><td class="right">      | Kind | Length | Meaning                        | Reference |</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      +------+--------+--------------------------------+-----------+</td><td> </td><td class="right">      +------+--------+--------------------------------+-----------+</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      | TBD0 | N      | Accurate ECN Order 0 (AccECN0) | RFC XXXX  |</td><td> </td><td class="right">      | TBD0 | N      | Accurate ECN Order 0 (AccECN0) | RFC XXXX  |</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      | TBD1 | N      | Accurate ECN Order 1 (AccECN1) | RFC XXXX  |</td><td> </td><td class="right">      | TBD1 | N      | Accurate ECN Order 1 (AccECN1) | RFC XXXX  |</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">      +------+--------+--------------------------------+-----------+</td><td> </td><td class="right">      +------+--------+--------------------------------+-----------+</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0038"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">                        <span class="insert">New TCP Option assignments</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [TO BE REMOVED: This registration should take place at the following</td><td> </td><td class="right">   [TO BE REMOVED: This registration should take place at the following</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   location: http://www.iana.org/assignments/tcp-parameters/tcp-</td><td> </td><td class="right">   location: http://www.iana.org/assignments/tcp-parameters/tcp-</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   parameters.xhtml#tcp-parameters-1 ]</td><td> </td><td class="right">   parameters.xhtml#tcp-parameters-1 ]</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Early implementations using experimental option 254 per [RFC6994]</td><td> </td><td class="right">   Early implementations using experimental option 254 per [RFC6994]</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   with the single magic number 0xACCE (16 bits), as allocated in the</td><td> </td><td class="right">   with the single magic number 0xACCE (16 bits), as allocated in the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   IANA "TCP Experimental Option Experiment Identifiers (TCP ExIDs)"</td><td> </td><td class="right">   IANA "TCP Experimental Option Experiment Identifiers (TCP ExIDs)"</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   registry, SHOULD migrate to use these new option kinds (TBD0 &amp; TBD1).</td><td> </td><td class="right">   registry, SHOULD migrate to use these new option kinds (TBD0 &amp; TBD1).</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [TO BE REMOVED: The description of the 0xACCE value in the TCP ExIDs</td><td> </td><td class="right">   [TO BE REMOVED: The description of the 0xACCE value in the TCP ExIDs</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-15" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-15"><em> page 46, line 9<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-15"><em> page 46, line 18<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Option is unusable (due for example to middlebox interference) the</td><td> </td><td class="right">   Option is unusable (due for example to middlebox interference) the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   essential part of AccECN's congestion feedback offers only limited</td><td> </td><td class="right">   essential part of AccECN's congestion feedback offers only limited</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   resilience to long runs of ACK loss (see Section 3.2.2.5).  These</td><td> </td><td class="right">   resilience to long runs of ACK loss (see Section 3.2.2.5).  These</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   problems are unlikely to be due to malicious intervention (because if</td><td> </td><td class="right">   problems are unlikely to be due to malicious intervention (because if</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   an attacker could strip a TCP option or discard a long run of ACKs it</td><td> </td><td class="right">   an attacker could strip a TCP option or discard a long run of ACKs it</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   could wreak other arbitrary havoc).  However, it would be of concern</td><td> </td><td class="right">   could wreak other arbitrary havoc).  However, it would be of concern</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   if AccECN's resilience could be indirectly compromised during a</td><td> </td><td class="right">   if AccECN's resilience could be indirectly compromised during a</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   flooding attack.  AccECN is still considered safe though, because if</td><td> </td><td class="right">   flooding attack.  AccECN is still considered safe though, because if</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   the option is not present, the AccECN Data Sender is then required to</td><td> </td><td class="right">   the option is not present, the AccECN Data Sender is then required to</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   switch to more conservative assumptions about wrap of congestion</td><td> </td><td class="right">   switch to more conservative assumptions about wrap of congestion</td><td class="lineno"><br></td></tr>
      <tr id="diff0039"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   indication counters (see Section 3.2.2.5 and Appendix A.2).  <span class="delete">{ToDo:</span></td><td> </td><td class="rblock">   indication counters (see Section 3.2.2.5 and Appendix A.2).</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   is this still true?}</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Section 5.1 describes how a TCP server can negotiate AccECN and use</td><td> </td><td class="right">   Section 5.1 describes how a TCP server can negotiate AccECN and use</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   the SYN cookie method for mitigating SYN flooding attacks.</td><td> </td><td class="right">   the SYN cookie method for mitigating SYN flooding attacks.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   There is concern that ECN feedback could be altered or suppressed,</td><td> </td><td class="right">   There is concern that ECN feedback could be altered or suppressed,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   particularly because a misbehaving Data Receiver could increase its</td><td> </td><td class="right">   particularly because a misbehaving Data Receiver could increase its</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   own throughput at the expense of others.  AccECN is compatible with</td><td> </td><td class="right">   own throughput at the expense of others.  AccECN is compatible with</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   the three schemes known to assure the integrity of ECN feedback (see</td><td> </td><td class="right">   the three schemes known to assure the integrity of ECN feedback (see</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   Section 5.3 for details).  If the AccECN Option is stripped by an</td><td> </td><td class="right">   Section 5.3 for details).  If the AccECN Option is stripped by an</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   incorrectly implemented middlebox, the resolution of the feedback</td><td> </td><td class="right">   incorrectly implemented middlebox, the resolution of the feedback</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-16" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-16"><em> page 48, line 15<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-16"><em> page 48, line 25<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [RFC5681]  Allman, M., Paxson, V., and E. Blanton, "TCP Congestion</td><td> </td><td class="right">   [RFC5681]  Allman, M., Paxson, V., and E. Blanton, "TCP Congestion</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              Control", RFC 5681, DOI 10.17487/RFC5681, September 2009,</td><td> </td><td class="right">              Control", RFC 5681, DOI 10.17487/RFC5681, September 2009,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc5681&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc5681&gt;.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC</td><td> </td><td class="right">   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,</td><td> </td><td class="right">              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              May 2017, &lt;https://www.rfc-editor.org/info/rfc8174&gt;.</td><td> </td><td class="right">              May 2017, &lt;https://www.rfc-editor.org/info/rfc8174&gt;.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">11.2.  Informative References</td><td> </td><td class="right">11.2.  Informative References</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0040"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   <span class="delete">[I-D.ietf-tcpm-2140bis]</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">              Touch, J., Welzl, M., and S. Islam, "TCP Control Block</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">              Interdependence", draft-ietf-tcpm-2140bis-11 (work in</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">              progress), April 2021.</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">                                                                         </td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [I-D.ietf-tcpm-generalized-ecn]</td><td> </td><td class="right">   [I-D.ietf-tcpm-generalized-ecn]</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              Bagnulo, M. and B. Briscoe, "ECN++: Adding Explicit</td><td> </td><td class="right">              Bagnulo, M. and B. Briscoe, "ECN++: Adding Explicit</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              Congestion Notification (ECN) to TCP Control Packets",</td><td> </td><td class="right">              Congestion Notification (ECN) to TCP Control Packets",</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              draft-ietf-tcpm-generalized-ecn-09 (work in progress),</td><td> </td><td class="right">              draft-ietf-tcpm-generalized-ecn-09 (work in progress),</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              January 2022.</td><td> </td><td class="right">              January 2022.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [I-D.ietf-tsvwg-l4s-arch]</td><td> </td><td class="right">   [I-D.ietf-tsvwg-l4s-arch]</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              Briscoe, B., Schepper, K. D., Bagnulo, M., and G. White,</td><td> </td><td class="right">              Briscoe, B., Schepper, K. D., Bagnulo, M., and G. White,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              "Low Latency, Low Loss, Scalable Throughput (L4S) Internet</td><td> </td><td class="right">              "Low Latency, Low Loss, Scalable Throughput (L4S) Internet</td><td class="lineno"><br></td></tr>
      <tr id="diff0041"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">              Service: Architecture", <span class="delete">draft-ietf-tsvwg-l4s-arch-16</span> (work</td><td> </td><td class="rblock">              Service: Architecture", <span class="insert">draft-ietf-tsvwg-l4s-arch-17</span> (work</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">              in progress), <span class="delete">February</span> 2022.</td><td> </td><td class="rblock">              in progress), <span class="insert">March</span> 2022.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [Mandalari18]</td><td> </td><td class="right">   [Mandalari18]</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              Mandalari, A., Lutu, A., Briscoe, B., Bagnulo, M., and Oe.</td><td> </td><td class="right">              Mandalari, A., Lutu, A., Briscoe, B., Bagnulo, M., and Oe.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              Alay, "Measuring ECN++: Good News for ++, Bad News for ECN</td><td> </td><td class="right">              Alay, "Measuring ECN++: Good News for ++, Bad News for ECN</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              over Mobile", IEEE Communications Magazine , March 2018.</td><td> </td><td class="right">              over Mobile", IEEE Communications Magazine , March 2018.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [RFC2018]  Mathis, M., Mahdavi, J., Floyd, S., and A. Romanow, "TCP</td><td> </td><td class="right">   [RFC2018]  Mathis, M., Mahdavi, J., Floyd, S., and A. Romanow, "TCP</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              Selective Acknowledgment Options", RFC 2018,</td><td> </td><td class="right">              Selective Acknowledgment Options", RFC 2018,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              DOI 10.17487/RFC2018, October 1996,</td><td> </td><td class="right">              DOI 10.17487/RFC2018, October 1996,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc2018&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc2018&gt;.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-17" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-17"><em> page 49, line 15<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-17"><em> page 49, line 20<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [RFC4987]  Eddy, W., "TCP SYN Flooding Attacks and Common</td><td> </td><td class="right">   [RFC4987]  Eddy, W., "TCP SYN Flooding Attacks and Common</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              Mitigations", RFC 4987, DOI 10.17487/RFC4987, August 2007,</td><td> </td><td class="right">              Mitigations", RFC 4987, DOI 10.17487/RFC4987, August 2007,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc4987&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc4987&gt;.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [RFC5562]  Kuzmanovic, A., Mondal, A., Floyd, S., and K.</td><td> </td><td class="right">   [RFC5562]  Kuzmanovic, A., Mondal, A., Floyd, S., and K.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              Ramakrishnan, "Adding Explicit Congestion Notification</td><td> </td><td class="right">              Ramakrishnan, "Adding Explicit Congestion Notification</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              (ECN) Capability to TCP's SYN/ACK Packets", RFC 5562,</td><td> </td><td class="right">              (ECN) Capability to TCP's SYN/ACK Packets", RFC 5562,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              DOI 10.17487/RFC5562, June 2009,</td><td> </td><td class="right">              DOI 10.17487/RFC5562, June 2009,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc5562&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc5562&gt;.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0042"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">   <span class="insert">[RFC5690]  Floyd, S., Arcia, A., Ros, D., and J. Iyengar, "Adding</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">              Acknowledgement Congestion Control to TCP", RFC 5690,</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">              DOI 10.17487/RFC5690, February 2010,</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">              &lt;https://www.rfc-editor.org/info/rfc5690&gt;.</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [RFC5925]  Touch, J., Mankin, A., and R. Bonica, "The TCP</td><td> </td><td class="right">   [RFC5925]  Touch, J., Mankin, A., and R. Bonica, "The TCP</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              Authentication Option", RFC 5925, DOI 10.17487/RFC5925,</td><td> </td><td class="right">              Authentication Option", RFC 5925, DOI 10.17487/RFC5925,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              June 2010, &lt;https://www.rfc-editor.org/info/rfc5925&gt;.</td><td> </td><td class="right">              June 2010, &lt;https://www.rfc-editor.org/info/rfc5925&gt;.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [RFC5961]  Ramaiah, A., Stewart, R., and M. Dalal, "Improving TCP's</td><td> </td><td class="right">   [RFC5961]  Ramaiah, A., Stewart, R., and M. Dalal, "Improving TCP's</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              Robustness to Blind In-Window Attacks", RFC 5961,</td><td> </td><td class="right">              Robustness to Blind In-Window Attacks", RFC 5961,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              DOI 10.17487/RFC5961, August 2010,</td><td> </td><td class="right">              DOI 10.17487/RFC5961, August 2010,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc5961&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc5961&gt;.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [RFC6824]  Ford, A., Raiciu, C., Handley, M., and O. Bonaventure,</td><td> </td><td class="right">   [RFC6824]  Ford, A., Raiciu, C., Handley, M., and O. Bonaventure,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-18" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-18"><em> page 51, line 5<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-18"><em> page 50, line 25<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [RFC8311]  Black, D., "Relaxing Restrictions on Explicit Congestion</td><td> </td><td class="right">   [RFC8311]  Black, D., "Relaxing Restrictions on Explicit Congestion</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              Notification (ECN) Experimentation", RFC 8311,</td><td> </td><td class="right">              Notification (ECN) Experimentation", RFC 8311,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              DOI 10.17487/RFC8311, January 2018,</td><td> </td><td class="right">              DOI 10.17487/RFC8311, January 2018,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc8311&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc8311&gt;.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   [RFC8511]  Khademi, N., Welzl, M., Armitage, G., and G. Fairhurst,</td><td> </td><td class="right">   [RFC8511]  Khademi, N., Welzl, M., Armitage, G., and G. Fairhurst,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              "TCP Alternative Backoff with ECN (ABE)", RFC 8511,</td><td> </td><td class="right">              "TCP Alternative Backoff with ECN (ABE)", RFC 8511,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              DOI 10.17487/RFC8511, December 2018,</td><td> </td><td class="right">              DOI 10.17487/RFC8511, December 2018,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc8511&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc8511&gt;.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="diff0043"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">   <span class="insert">[RFC9040]  Touch, J., Welzl, M., and S. Islam, "TCP Control Block</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">              Interdependence", RFC 9040, DOI 10.17487/RFC9040, July</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock"><span class="insert">              2021, &lt;https://www.rfc-editor.org/info/rfc9040&gt;.</span></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><br></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">Appendix A.  Example Algorithms</td><td> </td><td class="right">Appendix A.  Example Algorithms</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   This appendix is informative, not normative.  It gives example</td><td> </td><td class="right">   This appendix is informative, not normative.  It gives example</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   algorithms that would satisfy the normative requirements of the</td><td> </td><td class="right">   algorithms that would satisfy the normative requirements of the</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   AccECN protocol.  However, implementers are free to choose other ways</td><td> </td><td class="right">   AccECN protocol.  However, implementers are free to choose other ways</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   to implement the requirements.</td><td> </td><td class="right">   to implement the requirements.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">A.1.  Example Algorithm to Encode/Decode the AccECN Option</td><td> </td><td class="right">A.1.  Example Algorithm to Encode/Decode the AccECN Option</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   The example algorithms below show how a Data Receiver in AccECN mode</td><td> </td><td class="right">   The example algorithms below show how a Data Receiver in AccECN mode</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr id="part-19" class="change"><td><br></td><th><small>skipping to change at</small><a href="#part-19"><em> page 57, line 12<span class="hide"> ¶</span></em></a></th><th> <br>
</th><th><small>skipping to change at</small><a href="#part-19"><em> page 57, line 12<span class="hide"> ¶</span></em></a></th><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   where a is the decay constant for the EWMA.  However, then it is</td><td> </td><td class="right">   where a is the decay constant for the EWMA.  However, then it is</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   necessary to choose a good value for this constant, which ought to</td><td> </td><td class="right">   necessary to choose a good value for this constant, which ought to</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   depend on the number of packets in flight.  Also the decay constant</td><td> </td><td class="right">   depend on the number of packets in flight.  Also the decay constant</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   needs to be power of two to avoid floating point arithmetic.</td><td> </td><td class="right">   needs to be power of two to avoid floating point arithmetic.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">A.4.  Example Algorithm to Count Not-ECT Bytes</td><td> </td><td class="right">A.4.  Example Algorithm to Count Not-ECT Bytes</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   A Data Sender in AccECN mode can infer the amount of TCP payload data</td><td> </td><td class="right">   A Data Sender in AccECN mode can infer the amount of TCP payload data</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   arriving at the receiver marked Not-ECT from the difference between</td><td> </td><td class="right">   arriving at the receiver marked Not-ECT from the difference between</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   the amount of newly ACKed data and the sum of the bytes with the</td><td> </td><td class="right">   the amount of newly ACKed data and the sum of the bytes with the</td><td class="lineno"><br></td></tr>
      <tr id="diff0044"><td><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock">   other three markings, d.ceb, d.e0b and d.e1b.  <span class="delete">Note that, because</span></td><td> </td><td class="rblock">   other three markings, d.ceb, d.e0b and d.e1b.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   r.e0b is initialized to 1 and the other two counters are initialized</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   to 0, the initial sum will be 1, which matches the initial offset of</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="lblock"><span class="delete">   the TCP sequence number on completion of the 3WHS.</span></td><td> </td><td class="rblock"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   For this approach to be precise, it has to be assumed that spurious</td><td> </td><td class="right">   For this approach to be precise, it has to be assumed that spurious</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   (unnecessary) retransmissions do not lead to double counting.  This</td><td> </td><td class="right">   (unnecessary) retransmissions do not lead to double counting.  This</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   assumption is currently correct, given that RFC 3168 requires that</td><td> </td><td class="right">   assumption is currently correct, given that RFC 3168 requires that</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   the Data Sender marks retransmitted segments as Not-ECT.  However,</td><td> </td><td class="right">   the Data Sender marks retransmitted segments as Not-ECT.  However,</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   the converse is not true; necessary retransmissions will result in</td><td> </td><td class="right">   the converse is not true; necessary retransmissions will result in</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   under-counting.</td><td> </td><td class="right">   under-counting.</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   However, such precision is unlikely to be necessary.  The only known</td><td> </td><td class="right">   However, such precision is unlikely to be necessary.  The only known</td><td class="lineno"><br></td></tr>
      <tr><td class="lineno"><br></td><td class="left">   use of a count of Not-ECT marked bytes is to test whether equipment</td><td> </td><td class="right">   use of a count of Not-ECT marked bytes is to test whether equipment</td><td class="lineno"><br></td></tr>

     <tr><td><br></td><td class="left"><br></td><td> </td><td class="right"><br></td><td><br></td></tr>
     <tr id="end" bgcolor="gray"><th colspan="5" align="center">&nbsp;End of changes. 44 change blocks.&nbsp;</th></tr>
     <tr class="stats"><td><br></td><th><i>132 lines changed or deleted</i></th><th><i> </i><br>
</th><th><i>156 lines changed or added</i></th><td><br></td></tr>
     <tr><td colspan="5" class="small" align="center"><br>This html diff was produced by rfcdiff 1.45. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/">http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </tbody></table>
   
   
</body></html>